var pe=Object.defineProperty;var Ie=(i,e,s)=>e in i?pe(i,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[e]=s;var t=(i,e,s)=>Ie(i,typeof e!="symbol"?e+"":e,s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))h(a);new MutationObserver(a=>{for(const m of a)if(m.type==="childList")for(const g of m.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&h(g)}).observe(document,{childList:!0,subtree:!0});function s(a){const m={};return a.integrity&&(m.integrity=a.integrity),a.referrerPolicy&&(m.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?m.credentials="include":a.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function h(a){if(a.ep)return;a.ep=!0;const m=s(a);fetch(a.href,m)}})();const we=document.getElementById("gameScreen");function ye(){we.style.display="flex"}const Xe=document.getElementById("canvas1"),n=Xe.getContext("2d");let C=[],$=[],u=[];const Yt=new Image;Yt.src="./images/enemy1.png";$.push(Yt);const Et=new Image;Et.src="./images/battleturtleattack.png";$.push(Et);const $t=new Image;$t.src="./images/enemy3.png";$.push($t);const Mt=new Image;Mt.src="./images/centipidewalk.png";$.push(Mt);class M{constructor(e,s,h,a){t(this,"x");t(this,"y");t(this,"width");t(this,"height");this.x=e,this.y=s,this.width=h,this.height=a}draw(){}enemyMovement(){}}class xe extends M{constructor(s,h){super(s,h,x,F);t(this,"speed");t(this,"moment");t(this,"health");t(this,"pointsAwarded");t(this,"frameX");t(this,"frameY");t(this,"eachWidth");t(this,"eachHeight");t(this,"firstFrame");t(this,"lastFrame");t(this,"enemytype");t(this,"state");t(this,"attackAnimationFrames");t(this,"hurtAnimationFrames");t(this,"deathAnimationFrames");t(this,"dustCloudAnimationFrames");t(this,"attackImageSrc");t(this,"hurtImageSrc");t(this,"deathImageSrc");t(this,"dustCloudImageSrc");t(this,"attackImage");t(this,"hurtImage");t(this,"deathImage");t(this,"dustCloudImage");t(this,"endurance");t(this,"isCollidingWithVilan");t(this,"isCollidingWithHero");this.speed=.4,this.moment=this.speed,this.health=120,this.pointsAwarded=this.health,this.frameX=0,this.frameY=0,this.eachWidth=900,this.eachHeight=900,this.firstFrame=1,this.lastFrame=11,this.enemytype=$[0],this.attackAnimationFrames=11,this.hurtAnimationFrames=11,this.deathAnimationFrames=14,this.dustCloudAnimationFrames=4,this.attackImageSrc="./images/zomievillagerattack.png",this.hurtImageSrc="./images/zomievillagerhurt.png",this.deathImageSrc="./images/zomievillagerdeath.png",this.dustCloudImageSrc="./images/mandrake-dust-cloud.png",this.attackImage=new Image,this.attackImage.src=this.attackImageSrc,this.hurtImage=new Image,this.hurtImage.src=this.hurtImageSrc,this.deathImage=new Image,this.deathImage.src=this.deathImageSrc,this.dustCloudImage=new Image,this.dustCloudImage.src=this.dustCloudImageSrc,this.state="idle",this.endurance=20,this.isCollidingWithVilan=!1,this.isCollidingWithHero=!1}enemyMovement(){this.x=this.x-this.speed,r%5===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}draw(){switch(n.fillStyle="gold",n.font="10px Arial",n.fillText(this.health.toString(),this.x+25,this.y+10),this.state){case"idle":r%17===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.enemytype,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"attacking":r%10===0&&(this.frameX<this.attackAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.attackImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"hurt":r%8===0&&(this.frameX<this.hurtAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.hurtImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"dead":r%10===0&&(this.frameX<this.deathAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.deathImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"dustcloud":r%8===0&&(this.frameX<this.dustCloudAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.dustCloudImage,200*this.frameX,0,200,179,this.x,this.y,this.width,this.height);break}}}class Fe extends M{constructor(s,h){super(s,h,x,F);t(this,"speed");t(this,"moment");t(this,"health");t(this,"pointsAwarded");t(this,"frameX");t(this,"frameY");t(this,"eachWidth");t(this,"eachHeight");t(this,"firstFrame");t(this,"lastFrame");t(this,"enemytype");t(this,"state");t(this,"attackAnimationFrames");t(this,"hurtAnimationFrames");t(this,"deathAnimationFrames");t(this,"dustCloudAnimationFrames");t(this,"attackImageSrc");t(this,"hurtImageSrc");t(this,"deathImageSrc");t(this,"dustCloudImageSrc");t(this,"attackImage");t(this,"hurtImage");t(this,"deathImage");t(this,"dustCloudImage");t(this,"endurance");t(this,"isCollidingWithVilan");t(this,"isCollidingWithHero");t(this,"shootInterval");t(this,"lastShotTime");t(this,"projectileImageSrc");this.speed=.4,this.moment=this.speed,this.health=120,this.pointsAwarded=this.health,this.frameX=0,this.frameY=0,this.eachWidth=72.5,this.eachHeight=72,this.firstFrame=0,this.lastFrame=11,this.enemytype=$[1],this.attackAnimationFrames=3,this.hurtAnimationFrames=1,this.deathAnimationFrames=3,this.dustCloudAnimationFrames=4,this.attackImageSrc="./images/battleturtlefight.png",this.hurtImageSrc="./images/battleturtlehurt.png",this.deathImageSrc="./images/battleturtledead.png",this.dustCloudImageSrc="./images/mandrake-dust-cloud.png",this.attackImage=new Image,this.attackImage.src=this.attackImageSrc,this.hurtImage=new Image,this.hurtImage.src=this.hurtImageSrc,this.deathImage=new Image,this.deathImage.src=this.deathImageSrc,this.dustCloudImage=new Image,this.dustCloudImage.src=this.dustCloudImageSrc,this.state="idle",this.endurance=20,this.isCollidingWithVilan=!1,this.isCollidingWithHero=!1,this.shootInterval=1e3,this.lastShotTime=300,this.projectileImageSrc="./images/ninjaturtlebullet.png"}shoot(){const s=new st(this.x+this.width-30,this.y+20,-3,this.projectileImageSrc,"fireball",128,128,0,0,128,128);C.push(s)}enemyMovement(){const s=Date.now();s-this.lastShotTime>=this.shootInterval&&(console.log("Hello"),console.log(this.shootInterval),this.shoot(),this.lastShotTime=s),this.x=this.x-this.speed,r%5===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}draw(){switch(n.fillStyle="gold",n.font="10px Arial",n.fillText(this.health.toString(),this.x+25,this.y+10),this.state){case"idle":r%100===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.enemytype,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-20,this.width,this.height+10);break;case"attacking":r%5===0&&(this.frameX<this.attackAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.attackImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-20,this.width,this.height+10);break;case"hurt":r%5===0&&(this.frameX<this.hurtAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.hurtImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-20,this.width,this.height+10);break;case"dead":r%15===0&&(this.frameX<this.deathAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.deathImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-20,this.width,this.height+10);break;case"dustcloud":r%8===0&&(this.frameX<this.dustCloudAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.dustCloudImage,200*this.frameX,0,200,179,this.x,this.y,this.width,this.height);break}}}class ke extends M{constructor(s,h){super(s,h,x,F);t(this,"speed");t(this,"moment");t(this,"health");t(this,"pointsAwarded");t(this,"frameX");t(this,"frameY");t(this,"eachWidth");t(this,"eachHeight");t(this,"firstFrame");t(this,"lastFrame");t(this,"enemytype");t(this,"state");t(this,"attackAnimationFrames");t(this,"hurtAnimationFrames");t(this,"deathAnimationFrames");t(this,"dustCloudAnimationFrames");t(this,"attackImageSrc");t(this,"hurtImageSrc");t(this,"deathImageSrc");t(this,"dustCloudImageSrc");t(this,"attackImage");t(this,"hurtImage");t(this,"deathImage");t(this,"dustCloudImage");t(this,"endurance");t(this,"isCollidingWithVilan");t(this,"isCollidingWithHero");this.speed=.4,this.moment=this.speed,this.health=120,this.pointsAwarded=this.health,this.frameX=0,this.frameY=0,this.eachWidth=72,this.eachHeight=72,this.firstFrame=0,this.lastFrame=3,this.enemytype=$[3],this.attackAnimationFrames=15,this.hurtAnimationFrames=1,this.deathAnimationFrames=3,this.dustCloudAnimationFrames=4,this.attackImageSrc="./images/centipideattack.png",this.hurtImageSrc="./images/centipidehurt.png",this.deathImageSrc="./images/centipidedeath.png",this.dustCloudImageSrc="./images/mandrake-dust-cloud.png",this.attackImage=new Image,this.attackImage.src=this.attackImageSrc,this.hurtImage=new Image,this.hurtImage.src=this.hurtImageSrc,this.deathImage=new Image,this.deathImage.src=this.deathImageSrc,this.dustCloudImage=new Image,this.dustCloudImage.src=this.dustCloudImageSrc,this.state="idle",this.endurance=20,this.isCollidingWithVilan=!1,this.isCollidingWithHero=!1}enemyMovement(){this.x=this.x-this.speed,r%5===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}draw(){switch(n.fillStyle="gold",n.font="10px Arial",n.fillText(this.health.toString(),this.x+25,this.y+10),this.state){case"idle":r%100===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.enemytype,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-30,this.width+20,this.height+20);break;case"attacking":r%500===0&&(this.frameX<this.attackAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.attackImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-30,this.width+20,this.height+20);break;case"hurt":r%8===0&&(this.frameX<this.hurtAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.hurtImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-30,this.width+20,this.height+20);break;case"dead":r%10===0&&(this.frameX<this.deathAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.deathImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-30,this.width+20,this.height+20);break;case"dustcloud":r%8===0&&(this.frameX<this.dustCloudAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.dustCloudImage,200*this.frameX,0,200,179,this.x,this.y,this.width,this.height);break}}}class Se extends M{constructor(s,h){super(s,h,x,F);t(this,"speed");t(this,"moment");t(this,"health");t(this,"pointsAwarded");t(this,"frameX");t(this,"frameY");t(this,"eachWidth");t(this,"eachHeight");t(this,"firstFrame");t(this,"lastFrame");t(this,"enemytype");t(this,"state");t(this,"attackAnimationFrames");t(this,"hurtAnimationFrames");t(this,"deathAnimationFrames");t(this,"dustCloudAnimationFrames");t(this,"attackImageSrc");t(this,"hurtImageSrc");t(this,"deathImageSrc");t(this,"dustCloudImageSrc");t(this,"attackImage");t(this,"hurtImage");t(this,"deathImage");t(this,"dustCloudImage");t(this,"endurance");t(this,"isCollidingWithVilan");t(this,"isCollidingWithHero");this.speed=.4,this.moment=this.speed,this.health=120,this.pointsAwarded=this.health,this.frameX=0,this.frameY=0,this.eachWidth=900,this.eachHeight=900,this.firstFrame=0,this.lastFrame=11,this.enemytype=$[2],this.attackAnimationFrames=11,this.hurtAnimationFrames=11,this.deathAnimationFrames=14,this.dustCloudAnimationFrames=4,this.attackImageSrc="./images/fallenangelattack.png",this.hurtImageSrc="./images/fallenangelhurt.png",this.deathImageSrc="./images/fallenangeldeath.png",this.dustCloudImageSrc="./images/mandrake-dust-cloud.png",this.attackImage=new Image,this.attackImage.src=this.attackImageSrc,this.hurtImage=new Image,this.hurtImage.src=this.hurtImageSrc,this.deathImage=new Image,this.deathImage.src=this.deathImageSrc,this.dustCloudImage=new Image,this.dustCloudImage.src=this.dustCloudImageSrc,this.state="idle",this.endurance=20,this.isCollidingWithVilan=!1,this.isCollidingWithHero=!1}enemyMovement(){this.x=this.x-this.speed,r%5===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}draw(){switch(n.fillStyle="gold",n.font="10px Arial",n.fillText(this.health.toString(),this.x+25,this.y+10),this.state){case"idle":r%17===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.enemytype,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"attacking":r%10===0&&(this.frameX<this.attackAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.attackImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"hurt":r%8===0&&(this.frameX<this.hurtAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.hurtImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"dead":r%10===0&&(this.frameX<this.deathAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.deathImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"dustcloud":r%8===0&&(this.frameX<this.dustCloudAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.dustCloudImage,200*this.frameX,0,200,179,this.x,this.y,this.width,this.height);break}}}const Bt=[Se,xe,Fe,ke];function Ce(){for(let i=0;i<u.length;i++)u[i].enemyMovement(),u[i].draw(),u[i].x+u[i].width<0&&(u.splice(i,1),i--);for(let i=C.length-1;i>=0;i--)C[i]&&C[i].update(C[i]),C[i]&&C[i].draw(n)}let w=[];class st{constructor(e,s,h,a,m,g,d,j,D,L,z){t(this,"x");t(this,"y");t(this,"speed");t(this,"width");t(this,"height");t(this,"image");t(this,"type");t(this,"firstframe");t(this,"lastframe");t(this,"eachwidth");t(this,"eachheight");t(this,"firedPosition");this.x=e,this.y=s,this.firedPosition=this.x,this.speed=h,this.width=d,this.height=g,this.image=new Image,this.image.src=a,this.type=m,this.firstframe=j,this.lastframe=D,this.eachwidth=L,this.eachheight=z}draw(e){console.log("Hello"),e.drawImage(this.image,this.eachwidth*this.firstframe,0,this.eachwidth,this.eachheight,this.x,this.y,this.width,this.height),r%10===0&&(this.firstframe<this.lastframe?this.firstframe+=1:this.firstframe=this.firstframe)}update(e){Math.abs(this.x-this.firedPosition)>=64*3.5?(S(w,e),S(C,e)):(console.log(this.speed),this.x+=this.speed)}}class B{constructor(e,s,h,a,m,g,d,j,D,L,z,Q,Z,oe,le,de,ce,ge,fe,ue){t(this,"x");t(this,"y");t(this,"speed");t(this,"health");t(this,"frameX");t(this,"frameY");t(this,"eachWidth");t(this,"eachHeight");t(this,"firstFrame");t(this,"lastFrame");t(this,"image");t(this,"width");t(this,"height");t(this,"state");t(this,"attackAnimationFrames");t(this,"hurtAnimationFrames");t(this,"deathAnimationFrames");t(this,"dustCloudAnimationFrames");t(this,"moment");t(this,"attackImageSrc");t(this,"hurtImageSrc");t(this,"deathImageSrc");t(this,"dustCloudImageSrc");t(this,"attackImage");t(this,"hurtImage");t(this,"deathImage");t(this,"dustCloudImage");t(this,"endurance");t(this,"projectileImageSrc");t(this,"modulo");this.x=s,this.y=h,this.speed=a,this.moment=this.speed,this.health=m,this.frameX=g,this.frameY=0,this.eachWidth=j,this.eachHeight=D,this.firstFrame=g,this.lastFrame=d,this.image=new Image,this.image.src=e,this.width=64,this.height=64,this.health=m,this.state="idle",this.attackAnimationFrames=oe,this.hurtAnimationFrames=le,this.deathAnimationFrames=de,this.dustCloudAnimationFrames=ce,this.attackImageSrc=L,this.hurtImageSrc=z,this.deathImageSrc=Q,this.dustCloudImageSrc=Z,this.attackImage=new Image,this.attackImage.src=L,this.hurtImage=new Image,this.hurtImage.src=z,this.deathImage=new Image,this.deathImage.src=Q,this.dustCloudImage=new Image,this.dustCloudImage.src=Z,this.endurance=ge,this.projectileImageSrc=fe,this.modulo=ue}draw(e){switch(e.fillStyle="gold",e.font="10px Arial",e.fillText(`${this.health}`,this.x+18,this.y),this.state){case"idle":r%this.modulo===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame),e.drawImage(this.image,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-10,this.width,this.height);break;case"attacking":r%this.modulo===0&&(this.frameX<this.attackAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),e.drawImage(this.attackImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-10,this.width,this.height);break;case"hurt":r%this.modulo===0&&(this.frameX<this.hurtAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),e.drawImage(this.hurtImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-10,this.width,this.height);break;case"dead":r%this.modulo===0&&(this.frameX<this.deathAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),e.drawImage(this.deathImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-10,this.width,this.height);break;case"dustcloud":r%this.modulo===0&&(this.frameX<this.dustCloudAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),e.drawImage(this.dustCloudImage,200*this.frameX,0,200,179,this.x,this.y-10,this.width,this.height);break}}heroMovement(){r%this.modulo===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}}class Rt extends B{constructor(s,h){super("./images/hero1attack.png",s,h,.2,100,0,13,128,128,"./images/hero1attack_2.png","./images/hero1hurt.png","./images/hero1dead.png","./images/mandrake-dust-cloud.png",3,2,2,4,20,"./images/archerarrow.png",10);t(this,"shootInterval");t(this,"lastShotTime");this.shootInterval=2300,this.lastShotTime=0}heroMovement(){const s=Date.now();s-this.lastShotTime>=this.shootInterval&&(this.shoot(),this.lastShotTime=s)}shoot(){const s=new st(this.x+this.width-30,this.y,2,this.projectileImageSrc,"arrow",64,35,0,0,48,48);w.push(s)}}class jt extends B{constructor(s,h){super("./images/hero2attack.png",s,h,.2,100,0,4,128,128,"./images/hero2attack.png","./images/hero2hurt.png","./images/hero2dead.png","./images/mandrake-dust-cloud.png",6,3,3,4,20,"./images/hero2fireball.png",10);t(this,"shootInterval");t(this,"lastShotTime");this.shootInterval=800,this.lastShotTime=300}heroMovement(){const s=Date.now();s-this.lastShotTime>=this.shootInterval&&(this.shoot(),this.lastShotTime=s)}shoot(){const s=new st(this.x+this.width-30,this.y,2,this.projectileImageSrc,"fireball",60,80,0,32,128,128);w.push(s)}}class Dt extends B{constructor(e,s){super("./images/hero3run.png",e,s,.8,100,0,7,128,128,"./images/hero3attack.png","./images/hero3hurt.png","./images/hero3dead.png","./images/mandrake-dust-cloud.png",3,2,2,4,20,"projectileImageSrc",8)}heroMovement(){this.x=this.x+this.speed,r%8===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}}class Pt extends B{constructor(e,s){super("./images/hero4run.png",e,s,.8,100,0,5,96.4,98,"./images/hero4attack.png","./images/hero4hurt.png","./images/hero4dead.png","./images/mandrake-dust-cloud.png",3,2,3,4,5,"projectileImageSrc",15)}heroMovement(){this.x=this.x+this.speed,r%5===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}}class Gt extends B{constructor(e,s){super("./images/hero5run.png",e,s,.8,100,0,5,96.4,98,"./images/hero5attack.png","./images/hero5hurt.png","./images/hero5dead.png","./images/mandrake-dust-cloud.png",2,0,3,4,10,"projectileImageSrc",5)}heroMovement(){this.x=this.x+this.speed,r%5===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}}class Vt extends B{constructor(e,s){super("./images/hero6run.png",e,s,.8,100,0,7,128,128,"./images/hero6attack.png","./images/hero6hurt.png","./images/hero6dead.png","./images/mandrake-dust-cloud.png",3,2,2,4,5,"projectileImageSrc",5)}heroMovement(){this.x=this.x+this.speed,r%8===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}}class Ot extends B{constructor(s,h){super("./images/hero7attack.png",s,h,.8,100,0,3,130,130,"./images/hero7attack.png","./images/hero7dead.png","./images/hero1dead.png","./images/mandrake-dust-cloud.png",3,1,5,4,10,"./images/jinifireball.png",13);t(this,"shootInterval");t(this,"lastShotTime");this.shootInterval=700,this.lastShotTime=500}heroMovement(){const s=Date.now();s-this.lastShotTime>=this.shootInterval&&(this.shoot(),this.lastShotTime=s)}shoot(){const s=new st(this.x+this.width-30,this.y,2,this.projectileImageSrc,"fireball",60,60,0,9,642,642);w.push(s)}}class Lt extends B{constructor(s,h){super("./images/hero8attack.png",s,h,.8,100,0,6,128,128,"./images/hero8attack.png","./images/hero8hurt.png","./images/hero8dead.png","./images/mandrake-dust-cloud.png",6,3,8,4,20,"./images/hero8fireball.png",15);t(this,"shootInterval");t(this,"lastShotTime");this.shootInterval=1700,this.lastShotTime=700}heroMovement(){const s=Date.now();s-this.lastShotTime>=this.shootInterval&&(this.shoot(),this.lastShotTime=s)}shoot(){const s=new st(this.x+this.width-30,this.y,2,this.projectileImageSrc,"fireball",60,60,0,12,128,128);w.push(s)}}const V=document.getElementById("canvas1"),I=V.getContext("2d"),O=new Audio;O.src="./sound/resouce-increase.mp3";const wt=[],T=[];let o=null;function R(i,e,s,h,a,m,g,d,j,D,L,z){const Q=new Image;Q.src=i;const Z={x:e,y:s,width:64,height:64,imageSrc:i,frameX:0,frameY:0,eachWidth:m,eachHeight:g,firstFrame:h,lastFrame:a,image:Q,heroClass:d,cost:j,name:D,imageX:L,imageY:z};return wt.push(Z),Z}R("./images/card1.png",64*4,0,0,21,128,128,Rt,100,"Archer",64*4,0);R("./images/card2.png",64*5,0,0,11,128,128,jt,100,"Wizard",64*5,0);R("./images/card3.png",64*6,0,0,19,128,128,Dt,100,"Swordsman",64*6,0);function We(){I.clearRect(0,0,V.width,V.height),wt.forEach(i=>{I.strokeStyle="black",I.strokeRect(i.x,i.y,i.width,i.height),I.fillStyle="purple",I.fillRect(i.x,i.y,i.width,i.height),r%7===0&&(i.frameX<i.lastFrame?i.frameX+=1:i.frameX=i.firstFrame),I.fillStyle="gold",I.font="10px Arial",I.fillText(`${i.name}`,i.x+11,i.y+10),I.fillText(`Cost:${i.cost}`,i.x+11,i.y+20),I.drawImage(i.image,i.eachWidth*i.frameX,0,i.eachWidth,i.eachHeight,i.imageX,i.imageY,i.width,i.height)})}const yt=new Set;function kt(i,e){const s=`${i},${e}`;return yt.has(s)}V.addEventListener("click",i=>{const e=V.getBoundingClientRect();let s=i.clientX-e.left,h=i.clientY-e.top;if(s=s-s%64,h=h-h%64,!o||o&&h==0)wt.forEach(a=>{s>=a.x&&s<=a.x+a.width&&h>=a.y&&h<=a.y+a.height&&(o=a)});else{if(h>=64&&h<=564&&s>=128)if(o.heroClass===Dt||o.heroClass===Pt||o.heroClass===Gt||o.heroClass===Vt||o.heroClass==Ot||o.heroClass==Lt){const a=new o.heroClass(s,h);T.push(a)}else if(!kt(s,h)&&o.heroClass==Rt||!kt(s,h)&&o.heroClass==jt){const a=new o.heroClass(s,h);T.push(a);const m=`${s},${h}`;yt.add(m)}else console.log("Cannot drop hero on an occupied grid position.");else console.log("Cannot place hero in the first or last row.");o=null}});function Ae(){for(var i=0;i<=T.length-1;i++)T[i].heroMovement(),T[i].draw(I);Nt();for(let e=w.length-1;e>=0;e--)w[e]&&w[e].update(w[e]),w[e]&&w[e].draw(I)}setTimeout(()=>{O.play(),R("./images/card4.png",64*7,0,0,9,96.4,98,Pt,150,"Kings Guard",64*7,0)},0);setTimeout(()=>{O.play(),R("./images/card5.png",64*8,0,0,11,96.4,98,Gt,150,"Viking Hero",64*8,0)},0);setTimeout(()=>{O.play(),R("./images/card6.png",64*9,0,0,11,128.2,130,Vt,200,"Fighter",64*9,0)},0);setTimeout(()=>{O.play(),R("./images/card7.png",64*10,0,0,6,130,130,Ot,200,"Jinn",64*10,10)},0);setTimeout(()=>{O.play(),R("./images/card8.png",64*11,0,0,14,130,130,Lt,200,"Wizard Girl",64*11,10)},0);let zt=300;function ve(i){zt+=i,O.play()}let k=null,X=null;V.addEventListener("mousemove",i=>{const e=V.getBoundingClientRect();k=i.clientX-e.left,X=i.clientY-e.top,Nt()});function Nt(){k&&(k=k-k%64),X&&(X=X-X%64),o&&k!==null&&X!==null&&X>=64&&X<576&&k>=128&&(r%8===0&&(o.frameX<o.lastFrame?o.frameX+=1:o.frameX=o.firstFrame),I.strokeStyle="gold",I.strokeRect(k,X,64,64),I.drawImage(o.image,o.eachWidth*o.frameX,0,o.eachWidth,o.eachHeight,k,X-10,o.width,o.height))}const Kt=document.getElementById("canvas1"),He=Kt.getContext("2d");var qt=new Image;qt.src="./images/projectilefortower.png";class Te{constructor(e,s,h,a,m=0){t(this,"x");t(this,"y");t(this,"targetX");t(this,"targetY");t(this,"startX");t(this,"startY");t(this,"peakHeight");t(this,"speed");t(this,"progress");t(this,"width");t(this,"height");this.x=e,this.y=s,this.startX=e,this.startY=s,this.targetX=h,this.targetY=a,this.peakHeight=m,this.speed=(h>384,.8),this.progress=0,this.width=25,this.height=25}update(){this.progress+=this.speed;const e=Math.hypot(this.targetX-this.startX,this.targetY-this.startY),s=this.progress/e;this.x=this.startX+(this.targetX-this.startX)*s,this.y=this.startY+(this.targetY-this.startY)*s,s>=1&&(this.progress=e+Kt.width)}draw(){He.drawImage(qt,this.x,this.y,this.width,this.height)}}const be=document.getElementById("canvas1"),N=be.getContext("2d");let tt=[],St=null;const Ye="#00FF00",Ee="#FF0000",y=class y{constructor(e,s,h,a,m,g,d){t(this,"height");t(this,"width");t(this,"x");t(this,"y");t(this,"firstFrame");t(this,"lastFrame");t(this,"frameX");t(this,"tower");t(this,"eachWidth");t(this,"eachHeight");t(this,"lastShootTime");t(this,"shootInterval");t(this,"defaultShootInterval");t(this,"collisionShootInterval");t(this,"isColliding");t(this,"health");t(this,"maxHealth");t(this,"dustCloudSprite");t(this,"dustCloudFrames");t(this,"dustCloudFrameIndex");t(this,"dustCloudFrameWidth");this.height=e,this.width=s,this.x=h,this.y=a,this.firstFrame=m,this.lastFrame=g,this.frameX=d,this.tower=new Image,this.tower.src="./images/tower.png",this.eachWidth=128,this.eachHeight=144,this.lastShootTime=0,this.defaultShootInterval=5e3,this.collisionShootInterval=100,this.shootInterval=this.defaultShootInterval,this.isColliding=!1,this.maxHealth=10,this.health=this.maxHealth,this.dustCloudSprite=new Image,this.dustCloudSprite.src="./images/mandrake-dust-cloud.png",this.dustCloudFrames=4,this.dustCloudFrameIndex=0,this.dustCloudFrameWidth=200}draw(){r%6===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame),N.drawImage(this.tower,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height),this.drawHealthBar(),this.launchProjectile(),tt.forEach(e=>{e.update(),e.draw()})}launchProjectile(){const e=Date.now();let s=this.findNearestEnemy();if(s&&e-this.lastShootTime>this.shootInterval&&b.indexOf(this)===y.shooterIndex){const a=new Te(this.x+60,this.y,s.x,s.y,100);tt.push(a),this.lastShootTime=e}console.log(`Tower at (${this.x}, ${this.y}) shoot interval: ${this.shootInterval}`)}static updateShooter(){const e=Date.now();e-y.lastShooterChangeTime>y.shooterChangeInterval&&(y.shooterIndex=(y.shooterIndex+1)%b.length,y.lastShooterChangeTime=e,console.log(`Shooter changed to tower index: ${y.shooterIndex}`))}findNearestEnemy(){let e=1/0;const s=Math.random()<.5?this.y:this.y+64;return u.forEach(h=>{if(h.y>=s&&h.y<=s+64){const a=Math.hypot(h.x-this.x,h.y-this.y);a<e&&a<=64*3&&(e=a,St=h)}}),St}drawHealthBar(){const e=this.width,s=8,h=this.x,a=this.y-s+4;N.fillStyle=Ee,N.fillRect(h,a,e,s);const m=this.health/this.maxHealth;N.fillStyle=Ye,N.fillRect(h,a,e*m,s),this.health<=0&&(r%20===0&&(this.frameX<4?this.frameX+=1:this.frameX=this.firstFrame),N.drawImage(this.dustCloudSprite,200*this.frameX,0,200,179,this.x,this.y,this.width+20,this.height),setTimeout(()=>{S(b,this)},1e3))}checkCollisionWithEnemies(){this.isColliding=!1;for(let e of u)if(this.x<e.x+e.width&&this.x+this.width>e.x&&this.y<e.y+e.height&&this.y+this.height>e.y){e.speed=0,e.x=e.x+2,e.state="attacking",this.isColliding=!0,this.health-=10,this.shootInterval=this.collisionShootInterval;break}this.isColliding||(this.shootInterval=this.defaultShootInterval),console.log(`Tower at (${this.x}, ${this.y}) is colliding: ${this.isColliding}, health: ${this.health}`)}};t(y,"shooterIndex",0),t(y,"shooterChangeInterval",3e3),t(y,"lastShooterChangeTime",Date.now());let W=y;const b=[new W(128,128,0,64,0,11,0),new W(128,128,0,192,0,11,0),new W(128,128,0,320,0,11,0),new W(128,128,0,448,0,11,0)];function $e(){W.updateShooter(),b.forEach(i=>{i.draw(),i.checkCollisionWithEnemies()})}const Me=document.getElementById("canvas1"),ft=Me.getContext("2d");function Be(){ft.fillStyle="gold",ft.font="20px Arial",ft.fillText("Coins: "+zt,0,50)}function Re(){for(let i of T)for(let e of u)i.x<e.x+e.width&&i.x+i.width>e.x&&i.y<e.y+e.height&&i.y+i.height>e.y&&(e.isCollidingWithHero=!0,e.isCollidingWithVillain=!1,(i.speed>0&&i.x<e.x||i.speed<0&&i.x>e.x)&&(i.speed=0,e.speed=0,i.state="attacking",e.state="attacking",je(i,e)))}function je(i,e){let s=!0;const h=setInterval(()=>{i.health<=0||e.health<=0?(clearInterval(h),i.health<=0?(i.state="dead",setTimeout(()=>{i.state="dustcloud"},400),setTimeout(()=>{e.speed=e.moment,S(T,i);const m=`${i.x},${i.y}`;yt.delete(m)},1500)):i.state="idle",e.health<=0?(e.state="dead",setTimeout(()=>{e.state="dustcloud",i.state="idle"},400),setTimeout(()=>{i.speed=i.moment,S(u,e)},800)):e.state="idle"):(s?(i.state="attacking",e.state="hurt"):(i.state="hurt",e.state="attacking"),s=!s)},700),a=setInterval(()=>{i.health<=0||e.health<=0?clearInterval(a):(i.health-=i.endurance,e.health-=e.endurance)},500)}function S(i,e){const s=i.indexOf(e);s>-1&&i.splice(s,1)}function De(){for(let i of u)for(let e of w)e.x<i.x+i.width&&e.x+e.width>i.x&&e.y<i.y+i.height&&e.y+e.height>i.y&&(S(w,e),i.health-=i.endurance,i.health<=0?(i.state="dead",i.speed=0,setTimeout(()=>{i.state="dustcloud",setTimeout(()=>{S(u,i)},500)},500)):(i.state="hurt",i.speed=0,setTimeout(()=>{i.state="idle",i.speed=i.moment},500)))}function Pe(){for(let i of b)for(let e of u)i.x<e.x+e.width&&i.x+i.width>e.x&&i.y<e.y+e.height&&i.y+i.height>e.y&&(e.speed=0,e.x=e.x,e.state="attacking")}function Ge(){for(let i of tt)for(let e of u)i.x<e.x+e.width&&i.x+i.width>e.x&&i.y<e.y+e.height&&i.y+i.height>e.y&&(S(tt,i),e.health-=e.endurance,e.health<=0?(e.state="dead",e.speed=0,setTimeout(()=>{e.state="dustcloud",setTimeout(()=>{S(u,e)},500)},500)):(e.state="hurt",e.speed=0,setTimeout(()=>{e.state="idle",e.speed=e.moment},500)))}const et=document.getElementById("canvas1"),Jt=et.getContext("2d"),Ut=new Image;Ut.src="./images/mandrake.png";const Ve=new Image;Ve.src="./images/mandrake-dust-cloud.png";const mt=64,K=64,Oe=110;let Ct=[50,60,70,80],P=[];class Le{constructor(e,s,h){t(this,"x");t(this,"y");t(this,"size");t(this,"gamePoint");t(this,"creationTime");t(this,"frameX");t(this,"frameY");t(this,"spriteWidth");t(this,"spriteHeight");t(this,"minFrame");t(this,"maxFrame");this.x=e,this.y=s,this.size=h,this.gamePoint=Ct[Math.floor(Math.random()*Ct.length)],this.creationTime=Date.now(),this.frameX=0,this.frameY=0,this.spriteWidth=256,this.spriteHeight=256,this.minFrame=0,this.maxFrame=355}draw(e){r%1===0&&(this.frameX++,this.frameX>=18&&(this.frameX=0,this.frameY++,this.frameY>=18&&(this.frameY=0))),Jt.drawImage(Ut,this.frameX*this.spriteWidth,this.frameY*this.spriteHeight,this.spriteWidth,this.spriteHeight,this.x+(mt-this.size)/2,this.y+(K-this.size)/2,K*2,K*2),e.fillStyle="gold",e.font="10px Arial",e.fillText(this.gamePoint.toString(),this.x+25,this.y)}isExpired(){return Date.now()-this.creationTime>5500}isHovered(e,s,h){const a=e>=this.x&&e<=this.x+mt*1.3&&s>=this.y&&s<=this.y+K*1.3;return a&&ve(h.gamePoint),a}}function ze(){const i=et.width/mt,e=et.height/K,s=Math.floor(Math.random()*(i-2))+2,h=Math.floor(Math.random()*(e-1))+1,a=s*mt,m=h*K;return{x:a,y:m}}function Ne(){const{x:i,y:e}=ze(),s=new Le(i,e,Oe);P.push(s)}function Ke(){P=P.filter(i=>!i.isExpired());for(let i of P)i.draw(Jt)}et.addEventListener("mousemove",i=>{const e=et.getBoundingClientRect(),s=i.clientX-e.left,h=i.clientY-e.top;P=P.filter(a=>!a.isHovered(s,h,a))});const It=document.getElementById("canvas1"),qe=It.getContext("2d");function Je(i,e){if(i.fillStyle="gold",i.font="50px MedievalSharp",q>=3){qe.fillText("Game Over",It.width/2-300,It.height/2);return}i.fillText(` Seige Wave ${q} incoming get ready `,e.width/2-300,e.height/2)}const U=[],Qt=new Image;Qt.src="./images/golemrun.png";U.push(Qt);const Zt=new Image;Zt.src="./images/fireballrun.png";U.push(Zt);const _t=new Image;_t.src="./images/monsterdogwalk.png";U.push(_t);const Ue=document.getElementById("canvas1"),l=Ue.getContext("2d");class Qe extends M{constructor(s,h){super(s,h,x,F);t(this,"speed");t(this,"moment");t(this,"health");t(this,"pointsAwarded");t(this,"frameX");t(this,"frameY");t(this,"eachWidth");t(this,"eachHeight");t(this,"firstFrame");t(this,"lastFrame");t(this,"enemytype");t(this,"state");t(this,"attackAnimationFrames");t(this,"hurtAnimationFrames");t(this,"deathAnimationFrames");t(this,"dustCloudAnimationFrames");t(this,"attackImageSrc");t(this,"hurtImageSrc");t(this,"deathImageSrc");t(this,"dustCloudImageSrc");t(this,"attackImage");t(this,"hurtImage");t(this,"deathImage");t(this,"dustCloudImage");t(this,"endurance");t(this,"isCollidingWithVilan");t(this,"isCollidingWithHero");this.speed=.4,this.moment=this.speed,this.health=120,this.pointsAwarded=this.health,this.frameX=0,this.frameY=0,this.eachWidth=900,this.eachHeight=900,this.firstFrame=0,this.lastFrame=11,this.enemytype=U[0],this.attackAnimationFrames=3,this.hurtAnimationFrames=1,this.deathAnimationFrames=4,this.dustCloudAnimationFrames=4,this.attackImageSrc="./images/golemattack.png",this.hurtImageSrc="./images/golemhurt.png",this.deathImageSrc="./images/golemdead.png",this.dustCloudImageSrc="./images/mandrake-dust-cloud.png",this.attackImage=new Image,this.attackImage.src=this.attackImageSrc,this.hurtImage=new Image,this.hurtImage.src=this.hurtImageSrc,this.deathImage=new Image,this.deathImage.src=this.deathImageSrc,this.dustCloudImage=new Image,this.dustCloudImage.src=this.dustCloudImageSrc,this.state="idle",this.endurance=20,this.isCollidingWithVilan=!1,this.isCollidingWithHero=!1}enemyMovement(){this.x=this.x-this.speed,r%5===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}draw(){switch(l.fillStyle="gold",l.font="10px Arial",l.fillText(this.health.toString(),this.x+25,this.y+10),this.state){case"idle":r%17===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame),l.drawImage(this.enemytype,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"attacking":r%10===0&&(this.frameX<this.attackAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),l.drawImage(this.attackImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"hurt":r%8===0&&(this.frameX<this.hurtAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),l.drawImage(this.hurtImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"dead":r%10===0&&(this.frameX<this.deathAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),l.drawImage(this.deathImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"dustcloud":r%8===0&&(this.frameX<this.dustCloudAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),l.drawImage(this.dustCloudImage,200*this.frameX,0,200,179,this.x,this.y,this.width,this.height);break}}}class Ze extends M{constructor(s,h){super(s,h,x,F);t(this,"speed");t(this,"moment");t(this,"health");t(this,"pointsAwarded");t(this,"frameX");t(this,"frameY");t(this,"eachWidth");t(this,"eachHeight");t(this,"firstFrame");t(this,"lastFrame");t(this,"enemytype");t(this,"state");t(this,"attackAnimationFrames");t(this,"hurtAnimationFrames");t(this,"deathAnimationFrames");t(this,"dustCloudAnimationFrames");t(this,"attackImageSrc");t(this,"hurtImageSrc");t(this,"deathImageSrc");t(this,"dustCloudImageSrc");t(this,"attackImage");t(this,"hurtImage");t(this,"deathImage");t(this,"dustCloudImage");t(this,"endurance");t(this,"isCollidingWithVilan");t(this,"isCollidingWithHero");this.speed=.4,this.moment=this.speed,this.health=120,this.pointsAwarded=this.health,this.frameX=0,this.frameY=0,this.eachWidth=128,this.eachHeight=128,this.firstFrame=0,this.lastFrame=20,this.enemytype=U[1],this.attackAnimationFrames=23,this.hurtAnimationFrames=2,this.deathAnimationFrames=4,this.dustCloudAnimationFrames=4,this.attackImageSrc="./images/fireballattack.png",this.hurtImageSrc="./images/fireballhurt.png",this.deathImageSrc="./images/fireballdead.png",this.dustCloudImageSrc="./images/mandrake-dust-cloud.png",this.attackImage=new Image,this.attackImage.src=this.attackImageSrc,this.hurtImage=new Image,this.hurtImage.src=this.hurtImageSrc,this.deathImage=new Image,this.deathImage.src=this.deathImageSrc,this.dustCloudImage=new Image,this.dustCloudImage.src=this.dustCloudImageSrc,this.state="idle",this.endurance=20,this.isCollidingWithVilan=!1,this.isCollidingWithHero=!1}enemyMovement(){this.x=this.x-this.speed,r%5===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}draw(){switch(l.fillStyle="gold",l.font="10px Arial",l.fillText(this.health.toString(),this.x+35,this.y+10),this.state){case"idle":r%17===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame),l.drawImage(this.enemytype,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-10,this.width+30,this.height+30);break;case"attacking":r%10===0&&(this.frameX<this.attackAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),l.drawImage(this.attackImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"hurt":r%8===0&&(this.frameX<this.hurtAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),l.drawImage(this.hurtImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"dead":r%10===0&&(this.frameX<this.deathAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),l.drawImage(this.deathImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"dustcloud":r%8===0&&(this.frameX<this.dustCloudAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),l.drawImage(this.dustCloudImage,200*this.frameX,0,200,179,this.x,this.y,this.width,this.height);break}}}class _e extends M{constructor(s,h){super(s,h,x,F);t(this,"speed");t(this,"moment");t(this,"health");t(this,"pointsAwarded");t(this,"frameX");t(this,"frameY");t(this,"eachWidth");t(this,"eachHeight");t(this,"firstFrame");t(this,"lastFrame");t(this,"enemytype");t(this,"state");t(this,"attackAnimationFrames");t(this,"hurtAnimationFrames");t(this,"deathAnimationFrames");t(this,"dustCloudAnimationFrames");t(this,"attackImageSrc");t(this,"hurtImageSrc");t(this,"deathImageSrc");t(this,"dustCloudImageSrc");t(this,"attackImage");t(this,"hurtImage");t(this,"deathImage");t(this,"dustCloudImage");t(this,"endurance");t(this,"isCollidingWithVilan");t(this,"isCollidingWithHero");this.speed=.4,this.moment=this.speed,this.health=120,this.pointsAwarded=this.health,this.frameX=0,this.frameY=0,this.eachWidth=96,this.eachHeight=96,this.firstFrame=0,this.lastFrame=5,this.enemytype=U[2],this.attackAnimationFrames=11,this.hurtAnimationFrames=3,this.deathAnimationFrames=5,this.dustCloudAnimationFrames=4,this.attackImageSrc="./images/monsterdogattack.png",this.hurtImageSrc="./images/monterdoghurt.png",this.deathImageSrc="./images/monsterdogdeath.png",this.dustCloudImageSrc="./images/mandrake-dust-cloud.png",this.attackImage=new Image,this.attackImage.src=this.attackImageSrc,this.hurtImage=new Image,this.hurtImage.src=this.hurtImageSrc,this.deathImage=new Image,this.deathImage.src=this.deathImageSrc,this.dustCloudImage=new Image,this.dustCloudImage.src=this.dustCloudImageSrc,this.state="idle",this.endurance=20,this.isCollidingWithVilan=!1,this.isCollidingWithHero=!1}enemyMovement(){this.x=this.x-this.speed,r%5===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}draw(){switch(l.fillStyle="gold",l.font="10px Arial",l.fillText(this.health.toString(),this.x+35,this.y+10),this.state){case"idle":r%17===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame),l.drawImage(this.enemytype,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-30,this.width+10,this.height+20);break;case"attacking":r%10===0&&(this.frameX<this.attackAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),l.drawImage(this.attackImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-30,this.width+10,this.height+20);break;case"hurt":r%8===0&&(this.frameX<this.hurtAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),l.drawImage(this.hurtImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-30,this.width+10,this.height+20);break;case"dead":r%10===0&&(this.frameX<this.deathAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),l.drawImage(this.deathImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-30,this.width+10,this.height+20);break;case"dustcloud":r%8===0&&(this.frameX<this.dustCloudAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),l.drawImage(this.dustCloudImage,200*this.frameX,0,200,179,this.x,this.y,this.width,this.height);break}}}const ti=[Qe,Ze,_e],te=[],ee=new Image;ee.src="./images/enemy2.png";te.push(ee);const ei=document.getElementById("canvas1"),at=ei.getContext("2d");class ii extends M{constructor(s,h){super(s,h,x,F);t(this,"speed");t(this,"moment");t(this,"health");t(this,"pointsAwarded");t(this,"frameX");t(this,"frameY");t(this,"eachWidth");t(this,"eachHeight");t(this,"firstFrame");t(this,"lastFrame");t(this,"enemytype");t(this,"attackInterval");this.speed=.7,this.moment=this.speed,this.health=120,this.pointsAwarded=this.health,this.frameX=0,this.frameY=0,this.eachWidth=900,this.eachHeight=900,this.firstFrame=0,this.lastFrame=11,this.enemytype=te[0],this.attackInterval=20}enemyMovement(){this.x=this.x-this.speed,r%10===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}draw(){at.fillStyle="gold",at.font="10px Arial",at.fillText(this.health.toString(),this.x+25,this.y+10),at.drawImage(this.enemytype,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height)}}const si=[ii],Y=document.getElementById("canvas1"),p=Y.getContext("2d"),A=Y.width/2-100,v=Y.height/2-25,nt=200,ot=50;function hi(){p.fillStyle="#333",p.fillRect(0,0,Y.width,Y.height),p.fillStyle="white",p.font="60px Georgia",p.fillText("Game Over",Y.width/2-150,150),p.fillStyle="#4CAF50",p.fillRect(A,v+100,nt,ot),p.fillStyle="white",p.font="30px Arial",p.fillText("Restart",A+50,v+135),p.fillStyle="#FF4500",p.fillRect(A,v+200,nt,ot),p.fillStyle="white",p.font="30px Arial",p.fillText("Home",A+65,v+235)}Y.addEventListener("click",function(i){const e=Y.getBoundingClientRect(),s=i.clientX-e.left,h=i.clientY-e.top;s>=A&&s<A+nt&&h>=v+100&&h<v+100+ot&&(Tt(),gt()),s>=A&&s<A+nt&&h>=v+200&&h<v+200+ot&&(Ft(),xt(),Tt())});const ai=document.getElementById("canvas1"),ri=ai.getContext("2d");let ht=[];class ie{constructor(e,s,h,a,m,g,d,j,D){t(this,"height");t(this,"width");t(this,"x");t(this,"y");t(this,"image");t(this,"numXFrames");t(this,"numYFrames");t(this,"spriteWidth");t(this,"spriteHeight");t(this,"cardFrameX");t(this,"cardFrameY");t(this,"lastFrameTime");this.height=e,this.width=s,this.x=h,this.y=a,this.image=new Image,this.image.src=m,this.spriteWidth=j,this.spriteHeight=D,this.numXFrames=g,this.numYFrames=d,this.lastFrameTime=Date.now(),this.cardFrameX=10,this.cardFrameY=0}draw(){r%5===0&&(this.cardFrameX++,this.cardFrameX>=this.numXFrames&&(this.cardFrameX=0,this.cardFrameY++,this.cardFrameY>=this.numYFrames&&(this.cardFrameY=0))),ri.drawImage(this.image,this.cardFrameX*this.spriteWidth,this.cardFrameY*this.spriteHeight,this.spriteWidth,this.spriteHeight,this.x,this.y,this.width,this.height)}}class mi extends ie{constructor(e,s){super(100,130,e,s,"./images/tree1.png",11,0,249,341)}}class Xt extends ie{constructor(e,s){super(100,130,e,s,"./images/tree2.png",28,0,519,549)}}function ni(){ht.forEach(i=>{console.log("Hey"),i.draw()})}ht.push(new mi(770,0));ht.push(new Xt(1200,79));ht.push(new Xt(600,200));ht.push(new Xt(300,390));const f=document.getElementById("canvas1"),c=f.getContext("2d"),oi=[{x:64,y:0},{x:192,y:0},{x:320,y:0},{x:448,y:0}];f.height=576;f.width=1344;let r=0;const x=64,F=64,se=new Image;se.src="./images/hovertile.png";let q=1,J=[],rt;const E=64*4,Wt=20,ut=f.width-E-20,pt=20;let it=E;const At=2,li="#333";let he="",ae=[];J.push(...Bt);class di{constructor(e,s){t(this,"x");t(this,"y");t(this,"width");t(this,"height");t(this,"isHovered");this.x=e,this.y=s,this.width=x,this.height=F,this.isHovered=!1}draw(){this.isHovered&&c.drawImage(se,this.x,this.y,this.width,this.height)}}const H=[];function ci(){H.length=0;for(let i=64;i<f.height;i+=F)for(let e=128;e<f.width;e+=x)H.push(new di(e,i))}function re(){for(let i=0;i<H.length;i++)H[i].draw()}const lt=f.width/2-100,dt=f.height/2-25,me=200,ne=50;let G=!1,ct=0,vt=100,Ht=1;function xt(){c.fillStyle="#4CAF50",c.fillRect(lt,dt+200,me,ne),c.fillStyle="white",c.font="30px Arial",c.fillText("Start Game",lt+20,dt+235)}function Ft(){c.fillStyle="#333",c.fillRect(0,0,f.width,f.height),c.fillStyle="#FFD700",c.font="60px Georgia",c.fillText("Siege Guardians",f.width/2-150,100),c.font="24px Arial",c.fillStyle="white";const i=["Instructions:","1. Select a hero, hover over the game board and click on the gameboard drop it.","2. Enemies come in waves.","3. After each wave, each hero's damage-taking capability increases.","4. Mandrake appears at intervals across the game board. Hover over it to collect coins.","5. If all the 4 towers are destroyed, the game is over.","6. All the hero's have different abilities and different damgae taking capabilities.","7. You will be awarded with a new hero every 20 seconds.","8. Watch out for the towers health because if all 4 are destroyed its GAME OVER."];for(let e=0;e<i.length;e++)c.fillText(i[e],f.width/2-300,150+e*30)}f.addEventListener("click",function(i){console.log("Hello");const e=f.getBoundingClientRect(),s=i.clientX-e.left,h=i.clientY-e.top;s>=lt&&s<lt+me&&h>=dt+200&&h<dt+200+ne&&(G||(G=!0,ct=Date.now(),gt()))});f.addEventListener("mousemove",function(i){if(!G)return;const e=f.getBoundingClientRect(),s=i.clientX-e.left,h=i.clientY-e.top;let a=null,m=null;for(let g=0;g<H.length;g++){const d=H[g];if(s>=d.x&&s<d.x+d.width&&h>=d.y&&h<d.y+d.height){a=d.y,m=d.x;break}}for(let g=0;g<H.length;g++){const d=H[g];d.x===m||d.y===a?d.isHovered=!0:d.isHovered=!1}re()});function Tt(){_=500,tt.length=0,P.length=0,w.length=0,T.length=0,b.length=0,oi.forEach(i=>{b.push(new W(128,128,0,i.x,i.y,11,0))}),console.log(G),r=0,it=E,q=1,console.log(G),u.length=0,r=0,it=E,q=1,J=[...Bt],ae=[],ct=Date.now(),G=!0}function gt(){if(c.clearRect(0,0,f.width,f.height),!G){Ft(),xt();return}if(ci(),We(),re(),Be(),Ae(),Ce(),pi(),r++,rt=(Date.now()-ct)/1e3,it=E-rt/vt*E,he="Next wave in",rt<Ht&&Je(c,f),Ke(),Re(),De(),Pe(),Ge(),rt>=vt+Ht)switch(it=E,ct=Date.now(),q++,q){case 2:J.push(...ti);break;case 3:J.push(...si);break}if($e(),gi(),b.length==1){hi();return}ni(),requestAnimationFrame(gt)}function gi(){c.fillStyle=li,c.fillRect(ut,pt,E,Wt),c.fillStyle="#00CED1",c.fillRect(ut+2,pt+At,it-2,Wt-2*At),c.fillStyle="white",c.font="30px Georgia",c.fillText(he,ut-180,pt+20)}const fi=[64,128,192,256,320,384,448,512,576],ui=8;let _=5e3,bt=-_;function pi(){const i=Date.now();if(i-bt>_){bt=i;const e=Math.floor(Math.random()*ui),s=fi[e],h=Math.floor(Math.random()*J.length),a=new J[h](f.width,s);u.push(a),ae.push(a),_>1500&&(_-=150)}}Ft();xt();setInterval(Ne,5e3);var Ii=new Audio;Ii.src="./sound/maintheme.mp3";ye();gt();
