var De=Object.defineProperty;var Ve=(e,i,s)=>i in e?De(e,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[i]=s;var t=(e,i,s)=>Ve(e,typeof i!="symbol"?i+"":i,s);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))h(a);new MutationObserver(a=>{for(const m of a)if(m.type==="childList")for(const d of m.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&h(d)}).observe(document,{childList:!0,subtree:!0});function s(a){const m={};return a.integrity&&(m.integrity=a.integrity),a.referrerPolicy&&(m.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?m.credentials="include":a.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function h(a){if(a.ep)return;a.ep=!0;const m=s(a);fetch(a.href,m)}})();const Oe=document.getElementById("gameScreen");function Ge(){Oe.style.display="flex"}let x=[];class Z{constructor(i,s,h,a,m,d,c,v,T,L,z){t(this,"x");t(this,"y");t(this,"speed");t(this,"width");t(this,"height");t(this,"image");t(this,"type");t(this,"firstframe");t(this,"lastframe");t(this,"eachwidth");t(this,"eachheight");t(this,"firedPosition");this.x=i,this.y=s,this.firedPosition=this.x,this.speed=h,this.width=c,this.height=d,this.image=new Image,this.image.src=a,this.type=m,this.firstframe=v,this.lastframe=T,this.eachwidth=L,this.eachheight=z}draw(i){console.log("Hello"),i.drawImage(this.image,this.eachwidth*this.firstframe,0,this.eachwidth,this.eachheight,this.x,this.y,this.width,this.height),r%10===0&&(this.firstframe<this.lastframe?this.firstframe+=1:this.firstframe=this.firstframe)}update(i){Math.abs(this.x-this.firedPosition)>=64*3.5?(y(x,i),y(I,i)):(console.log(this.speed),this.x+=this.speed)}}const Le=document.getElementById("canvas1"),o=Le.getContext("2d");let I=[],_=[],u=[];const te=new Image;te.src="./images/firevizardattack.png";_.push(te);const ee=new Image;ee.src="./images/battleturtleattack.png";_.push(ee);const ie=new Image;ie.src="./images/tengurun.png";_.push(ie);const se=new Image;se.src="./images/mazerun.png";_.push(se);class V{constructor(i,s,h,a){t(this,"x");t(this,"y");t(this,"width");t(this,"height");this.x=i,this.y=s,this.width=h,this.height=a}draw(){}enemyMovement(){}}class ze extends V{constructor(s,h){super(s,h,O,G);t(this,"speed");t(this,"moment");t(this,"health");t(this,"pointsAwarded");t(this,"frameX");t(this,"frameY");t(this,"eachWidth");t(this,"eachHeight");t(this,"firstFrame");t(this,"lastFrame");t(this,"enemytype");t(this,"state");t(this,"attackAnimationFrames");t(this,"hurtAnimationFrames");t(this,"deathAnimationFrames");t(this,"dustCloudAnimationFrames");t(this,"attackImageSrc");t(this,"hurtImageSrc");t(this,"deathImageSrc");t(this,"dustCloudImageSrc");t(this,"attackImage");t(this,"hurtImage");t(this,"deathImage");t(this,"dustCloudImage");t(this,"endurance");t(this,"isCollidingWithVilan");t(this,"isCollidingWithHero");t(this,"type");t(this,"projectileImageSrc");t(this,"shootInterval");t(this,"lastShotTime");this.speed=.4,this.moment=this.speed,this.health=120,this.pointsAwarded=this.health,this.frameX=0,this.frameY=0,this.eachWidth=128,this.eachHeight=128,this.firstFrame=1,this.lastFrame=15,this.enemytype=_[0],this.attackAnimationFrames=13,this.hurtAnimationFrames=2,this.deathAnimationFrames=5,this.dustCloudAnimationFrames=4,this.attackImageSrc="./images/vizardattack.png",this.hurtImageSrc="./images/vizardhurt.png",this.deathImageSrc="./images/vizarddead.png",this.dustCloudImageSrc="./images/mandrake-dust-cloud.png",this.attackImage=new Image,this.attackImage.src=this.attackImageSrc,this.hurtImage=new Image,this.hurtImage.src=this.hurtImageSrc,this.deathImage=new Image,this.deathImage.src=this.deathImageSrc,this.dustCloudImage=new Image,this.dustCloudImage.src=this.dustCloudImageSrc,this.state="idle",this.endurance=20,this.isCollidingWithVilan=!1,this.isCollidingWithHero=!1,this.type="enemy",this.shootInterval=1300,this.lastShotTime=600,this.projectileImageSrc="./images/fireballattack.png"}shoot(){const s=new Z(this.x+this.width-150,this.y,-3,this.projectileImageSrc,"fireball",64,64,0,23,128,128);I.push(s)}enemyMovement(){const s=Date.now();s-this.lastShotTime>=this.shootInterval&&(console.log("Hello"),console.log(this.shootInterval),this.shoot(),this.lastShotTime=s),this.x=this.x-this.speed,r%5===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}draw(){switch(o.fillStyle="gold",o.font="8px Audiowide",o.fillText(this.health.toString(),this.x+20,this.y),this.state){case"idle":r%1e4===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame),o.drawImage(this.enemytype,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x-50,this.y-40,this.width+50,this.height+30);break;case"attacking":r%10===0&&(this.frameX<this.attackAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),o.drawImage(this.attackImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x-50,this.y-40,this.width+50,this.height+30);break;case"hurt":r%8===0&&(this.frameX<this.hurtAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),o.drawImage(this.hurtImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x-50,this.y-40,this.width+50,this.height+30);break;case"dead":r%10===0&&(this.frameX<this.deathAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),o.drawImage(this.deathImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x-50,this.y-40,this.width+50,this.height+30);break;case"dustcloud":r%8===0&&(this.frameX<this.dustCloudAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),o.drawImage(this.dustCloudImage,200*this.frameX,0,200,179,this.x-50,this.y-40,this.width+50,this.height+30);break}}}class Ne extends V{constructor(s,h){super(s,h,O,G);t(this,"type");t(this,"speed");t(this,"moment");t(this,"health");t(this,"pointsAwarded");t(this,"frameX");t(this,"frameY");t(this,"eachWidth");t(this,"eachHeight");t(this,"firstFrame");t(this,"lastFrame");t(this,"enemytype");t(this,"state");t(this,"attackAnimationFrames");t(this,"hurtAnimationFrames");t(this,"deathAnimationFrames");t(this,"dustCloudAnimationFrames");t(this,"attackImageSrc");t(this,"hurtImageSrc");t(this,"deathImageSrc");t(this,"dustCloudImageSrc");t(this,"attackImage");t(this,"hurtImage");t(this,"deathImage");t(this,"dustCloudImage");t(this,"endurance");t(this,"isCollidingWithVilan");t(this,"isCollidingWithHero");t(this,"shootInterval");t(this,"lastShotTime");t(this,"projectileImageSrc");this.speed=.4,this.moment=this.speed,this.health=120,this.pointsAwarded=this.health,this.frameX=0,this.frameY=0,this.eachWidth=72.5,this.eachHeight=72,this.firstFrame=0,this.lastFrame=11,this.type="enemy",this.enemytype=_[1],this.attackAnimationFrames=3,this.hurtAnimationFrames=1,this.deathAnimationFrames=3,this.dustCloudAnimationFrames=4,this.attackImageSrc="./images/battleturtlefight.png",this.hurtImageSrc="./images/battleturtlehurt.png",this.deathImageSrc="./images/battleturtledead.png",this.dustCloudImageSrc="./images/mandrake-dust-cloud.png",this.attackImage=new Image,this.attackImage.src=this.attackImageSrc,this.hurtImage=new Image,this.hurtImage.src=this.hurtImageSrc,this.deathImage=new Image,this.deathImage.src=this.deathImageSrc,this.dustCloudImage=new Image,this.dustCloudImage.src=this.dustCloudImageSrc,this.state="idle",this.endurance=20,this.isCollidingWithVilan=!1,this.isCollidingWithHero=!1,this.shootInterval=1e3,this.lastShotTime=300,this.projectileImageSrc="./images/ninjaturtlebullet.png"}shoot(){const s=new Z(this.x+this.width-30,this.y+20,-3,this.projectileImageSrc,"fireball",9,10,0,0,9,10);I.push(s)}enemyMovement(){const s=Date.now();s-this.lastShotTime>=this.shootInterval&&(console.log("Hello"),console.log(this.shootInterval),this.shoot(),this.lastShotTime=s),this.x=this.x-this.speed,r%5===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}draw(){switch(o.fillStyle="gold",o.font="8px Audiowide",o.fillText(this.health.toString(),this.x+25,this.y+10),this.state){case"idle":r%100===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame),o.drawImage(this.enemytype,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-20,this.width,this.height+10);break;case"attacking":r%5===0&&(this.frameX<this.attackAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),o.drawImage(this.attackImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-20,this.width,this.height+10);break;case"hurt":r%5===0&&(this.frameX<this.hurtAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),o.drawImage(this.hurtImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-20,this.width,this.height+10);break;case"dead":r%15===0&&(this.frameX<this.deathAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),o.drawImage(this.deathImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-20,this.width,this.height+10);break;case"dustcloud":r%8===0&&(this.frameX<this.dustCloudAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),o.drawImage(this.dustCloudImage,200*this.frameX,0,200,179,this.x,this.y,this.width,this.height);break}}}class Ke extends V{constructor(s,h){super(s,h,O,G);t(this,"type");t(this,"speed");t(this,"moment");t(this,"health");t(this,"pointsAwarded");t(this,"frameX");t(this,"frameY");t(this,"eachWidth");t(this,"eachHeight");t(this,"firstFrame");t(this,"lastFrame");t(this,"enemytype");t(this,"state");t(this,"attackAnimationFrames");t(this,"hurtAnimationFrames");t(this,"deathAnimationFrames");t(this,"dustCloudAnimationFrames");t(this,"attackImageSrc");t(this,"hurtImageSrc");t(this,"deathImageSrc");t(this,"dustCloudImageSrc");t(this,"attackImage");t(this,"hurtImage");t(this,"deathImage");t(this,"dustCloudImage");t(this,"endurance");t(this,"isCollidingWithVilan");t(this,"isCollidingWithHero");t(this,"projectileImageSrc");t(this,"shootInterval");t(this,"lastShotTime");this.type="enemy",this.speed=.4,this.moment=this.speed,this.health=120,this.pointsAwarded=this.health,this.frameX=0,this.frameY=0,this.eachWidth=128,this.eachHeight=128,this.firstFrame=0,this.lastFrame=14,this.enemytype=_[3],this.attackAnimationFrames=3,this.hurtAnimationFrames=2,this.deathAnimationFrames=4,this.dustCloudAnimationFrames=4,this.attackImageSrc="./images/mageattack.png",this.hurtImageSrc="./images/magehurt.png",this.deathImageSrc="./images/magedead.png",this.dustCloudImageSrc="./images/mandrake-dust-cloud.png",this.attackImage=new Image,this.attackImage.src=this.attackImageSrc,this.hurtImage=new Image,this.hurtImage.src=this.hurtImageSrc,this.deathImage=new Image,this.deathImage.src=this.deathImageSrc,this.dustCloudImage=new Image,this.dustCloudImage.src=this.dustCloudImageSrc,this.state="idle",this.endurance=20,this.isCollidingWithVilan=!1,this.isCollidingWithHero=!1,this.shootInterval=1200,this.lastShotTime=0,this.projectileImageSrc="./images/magefireball.png"}shoot(){const s=new Z(this.x+this.width-100,this.y,-3,this.projectileImageSrc,"fireball",64,64,0,8,64,64);I.push(s)}enemyMovement(){const s=Date.now();s-this.lastShotTime>=this.shootInterval&&(console.log("Hello"),console.log(this.shootInterval),this.shoot(),this.lastShotTime=s),this.x=this.x-this.speed,r%5===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}draw(){switch(o.fillStyle="gold",o.font="8px Audiowide",o.fillText(this.health.toString(),this.x+5,this.y),this.state){case"idle":r%1e3===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame),o.drawImage(this.enemytype,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x-50,this.y-40,this.width+50,this.height+30);break;case"attacking":r%5===0&&(this.frameX<this.attackAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),o.drawImage(this.attackImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x-50,this.y-40,this.width+50,this.height+30);break;case"hurt":r%3===0&&(this.frameX<this.hurtAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),o.drawImage(this.hurtImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x-50,this.y-40,this.width+50,this.height+30);break;case"dead":r%10===0&&(this.frameX<this.deathAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),o.drawImage(this.deathImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x-50,this.y-40,this.width+50,this.height+30);break;case"dustcloud":r%8===0&&(this.frameX<this.dustCloudAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),o.drawImage(this.dustCloudImage,200*this.frameX,0,200,179,this.x,this.y,this.width,this.height);break}}}class Ue extends V{constructor(s,h){super(s,h,O,G);t(this,"type");t(this,"speed");t(this,"moment");t(this,"health");t(this,"pointsAwarded");t(this,"frameX");t(this,"frameY");t(this,"eachWidth");t(this,"eachHeight");t(this,"firstFrame");t(this,"lastFrame");t(this,"enemytype");t(this,"state");t(this,"attackAnimationFrames");t(this,"hurtAnimationFrames");t(this,"deathAnimationFrames");t(this,"dustCloudAnimationFrames");t(this,"attackImageSrc");t(this,"hurtImageSrc");t(this,"deathImageSrc");t(this,"dustCloudImageSrc");t(this,"attackImage");t(this,"hurtImage");t(this,"deathImage");t(this,"dustCloudImage");t(this,"endurance");t(this,"isCollidingWithVilan");t(this,"isCollidingWithHero");this.type="enemy",this.speed=.4,this.moment=this.speed,this.health=120,this.pointsAwarded=this.health,this.frameX=0,this.frameY=0,this.eachWidth=128,this.eachHeight=128,this.firstFrame=0,this.lastFrame=22,this.enemytype=_[2],this.attackAnimationFrames=12,this.hurtAnimationFrames=2,this.deathAnimationFrames=6,this.dustCloudAnimationFrames=4,this.attackImageSrc="./images/tenguattack.png",this.hurtImageSrc="./images/tenguhurt.png",this.deathImageSrc="./images/tengudead.png",this.dustCloudImageSrc="./images/mandrake-dust-cloud.png",this.attackImage=new Image,this.attackImage.src=this.attackImageSrc,this.hurtImage=new Image,this.hurtImage.src=this.hurtImageSrc,this.deathImage=new Image,this.deathImage.src=this.deathImageSrc,this.dustCloudImage=new Image,this.dustCloudImage.src=this.dustCloudImageSrc,this.state="idle",this.endurance=20,this.isCollidingWithVilan=!1,this.isCollidingWithHero=!1}enemyMovement(){this.x=this.x-this.speed,r%5===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}draw(){switch(o.fillStyle="gold",o.font="8px Audiowide",o.fillText(this.health.toString(),this.x,this.y),this.state){case"idle":r%17===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame),o.drawImage(this.enemytype,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x-20,this.y-20,this.width+10,this.height+10);break;case"attacking":r%5===0&&(this.frameX<this.attackAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),o.drawImage(this.attackImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x-20,this.y-20,this.width+10,this.height+10);break;case"hurt":r%5===0&&(this.frameX<this.hurtAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),o.drawImage(this.hurtImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x-20,this.y-20,this.width+10,this.height+10);break;case"dead":r%10===0&&(this.frameX<this.deathAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),o.drawImage(this.deathImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x-20,this.y-20,this.width+10,this.height+10);break;case"dustcloud":r%8===0&&(this.frameX<this.dustCloudAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),o.drawImage(this.dustCloudImage,200*this.frameX,0,200,179,this.x-20,this.y-20,this.width+10,this.height+10);break}}}const he=[Ue,ze,Ne,Ke];function qe(){for(let e=0;e<u.length;e++)u[e].enemyMovement(),u[e].draw(),u[e].x+u[e].width<0&&(u.splice(e,1),e--);for(let e=I.length-1;e>=0;e--)I[e]&&I[e].update(I[e]),I[e]&&I[e].draw(o)}const Je=document.getElementById("canvas1"),gt=Je.getContext("2d");let C=[];class dt{constructor(i,s,h,a,m,d){t(this,"value");t(this,"x");t(this,"y");t(this,"size");t(this,"life");t(this,"color");t(this,"opacity");this.value=i,this.x=s,this.y=h,this.size=a,this.life=m,this.color=d,this.opacity=1}update(){this.y=this.y-.6,this.life=this.life+1,this.opacity>.02&&(this.opacity-=.02)}draw(){gt.globalAlpha=this.opacity,gt.fillStyle=this.color,gt.font=`${this.size}px Audiowide`,gt.fillText(this.value.toString(),this.x,this.y),gt.globalAlpha=1}}function Qe(){for(let e=0;e<=C.length-1;e++)C[e].draw(),C[e].update(),C[e].life>5e8&&y(C,C[e])}class tt{constructor(i,s,h,a,m,d,c,v,T,L,z,et,it,Rt,Mt,yt,Xt,Me,Pe,Be){t(this,"x");t(this,"y");t(this,"speed");t(this,"health");t(this,"frameX");t(this,"frameY");t(this,"eachWidth");t(this,"eachHeight");t(this,"firstFrame");t(this,"lastFrame");t(this,"image");t(this,"width");t(this,"height");t(this,"state");t(this,"attackAnimationFrames");t(this,"hurtAnimationFrames");t(this,"deathAnimationFrames");t(this,"dustCloudAnimationFrames");t(this,"moment");t(this,"attackImageSrc");t(this,"hurtImageSrc");t(this,"deathImageSrc");t(this,"dustCloudImageSrc");t(this,"attackImage");t(this,"hurtImage");t(this,"deathImage");t(this,"dustCloudImage");t(this,"endurance");t(this,"projectileImageSrc");t(this,"modulo");this.x=s,this.y=h,this.speed=a,this.moment=this.speed,this.health=m,this.frameX=d,this.frameY=0,this.eachWidth=v,this.eachHeight=T,this.firstFrame=d,this.lastFrame=c,this.image=new Image,this.image.src=i,this.width=64,this.height=64,this.health=m,this.state="idle",this.attackAnimationFrames=Rt,this.hurtAnimationFrames=Mt,this.deathAnimationFrames=yt,this.dustCloudAnimationFrames=Xt,this.attackImageSrc=L,this.hurtImageSrc=z,this.deathImageSrc=et,this.dustCloudImageSrc=it,this.attackImage=new Image,this.attackImage.src=L,this.hurtImage=new Image,this.hurtImage.src=z,this.deathImage=new Image,this.deathImage.src=et,this.dustCloudImage=new Image,this.dustCloudImage.src=it,this.endurance=Me,this.projectileImageSrc=Pe,this.modulo=Be}draw(i){switch(i.fillStyle="gold",i.font="10px Audiowide",i.fillText(`${this.health}`,this.x+18,this.y),this.state){case"idle":r%this.modulo===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame),i.drawImage(this.image,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-10,this.width,this.height);break;case"attacking":r%this.modulo===0&&(this.frameX<this.attackAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),i.drawImage(this.attackImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-10,this.width,this.height);break;case"hurt":r%this.modulo===0&&(this.frameX<this.hurtAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),i.drawImage(this.hurtImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-10,this.width,this.height);break;case"dead":r%this.modulo===0&&(this.frameX<this.deathAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),i.drawImage(this.deathImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-10,this.width,this.height);break;case"dustcloud":r%this.modulo===0&&(this.frameX<this.dustCloudAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),i.drawImage(this.dustCloudImage,200*this.frameX,0,200,179,this.x,this.y-10,this.width,this.height);break}}heroMovement(){r%this.modulo===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}}class ae extends tt{constructor(s,h){super("./images/hero1attack.png",s,h,.2,100,0,13,128,128,"./images/hero1attack_2.png","./images/hero1hurt.png","./images/hero1dead.png","./images/mandrake-dust-cloud.png",3,2,2,4,20,"./images/archerarrow.png",10);t(this,"shootInterval");t(this,"lastShotTime");this.shootInterval=2300,this.lastShotTime=0}heroMovement(){const s=Date.now();s-this.lastShotTime>=this.shootInterval&&(this.shoot(),this.lastShotTime=s)}shoot(){const s=new Z(this.x+this.width-30,this.y,2,this.projectileImageSrc,"arrow",64,35,0,0,48,48);x.push(s)}}class re extends tt{constructor(s,h){super("./images/hero2attack.png",s,h,.2,100,0,4,128,128,"./images/hero2attack.png","./images/hero2hurt.png","./images/hero2dead.png","./images/mandrake-dust-cloud.png",6,3,3,4,20,"./images/hero2fireball.png",10);t(this,"shootInterval");t(this,"lastShotTime");this.shootInterval=800,this.lastShotTime=300}heroMovement(){const s=Date.now();s-this.lastShotTime>=this.shootInterval&&(this.shoot(),this.lastShotTime=s)}shoot(){const s=new Z(this.x+this.width-30,this.y,2,this.projectileImageSrc,"fireball",60,80,0,32,128,128);x.push(s)}}class me extends tt{constructor(i,s){super("./images/hero3run.png",i,s,.8,100,0,7,128,128,"./images/hero3attack.png","./images/hero3hurt.png","./images/hero3dead.png","./images/mandrake-dust-cloud.png",3,2,2,4,20,"projectileImageSrc",8)}heroMovement(){this.x=this.x+this.speed,r%8===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}}class oe extends tt{constructor(i,s){super("./images/hero4run.png",i,s,.8,100,0,5,96.4,98,"./images/hero4attack.png","./images/hero4hurt.png","./images/hero4dead.png","./images/mandrake-dust-cloud.png",3,2,3,4,5,"projectileImageSrc",15)}heroMovement(){this.x=this.x+this.speed,r%5===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}}class ne extends tt{constructor(i,s){super("./images/hero5run.png",i,s,.8,100,0,5,96.4,98,"./images/hero5attack.png","./images/hero5hurt.png","./images/hero5dead.png","./images/mandrake-dust-cloud.png",2,0,3,4,10,"projectileImageSrc",5)}heroMovement(){this.x=this.x+this.speed,r%5===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}}class le extends tt{constructor(i,s){super("./images/hero6run.png",i,s,.8,100,0,7,128,128,"./images/hero6attack.png","./images/hero6hurt.png","./images/hero6dead.png","./images/mandrake-dust-cloud.png",3,2,2,4,5,"projectileImageSrc",5)}heroMovement(){this.x=this.x+this.speed,r%8===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}}class de extends tt{constructor(s,h){super("./images/hero7attack.png",s,h,.8,100,0,3,130,130,"./images/hero7attack.png","./images/hero7dead.png","./images/hero1dead.png","./images/mandrake-dust-cloud.png",3,1,5,4,10,"./images/jinifireball.png",13);t(this,"shootInterval");t(this,"lastShotTime");this.shootInterval=700,this.lastShotTime=500}heroMovement(){const s=Date.now();s-this.lastShotTime>=this.shootInterval&&(this.shoot(),this.lastShotTime=s)}shoot(){const s=new Z(this.x+this.width-30,this.y,2,this.projectileImageSrc,"fireball",60,60,0,9,642,642);x.push(s)}}class ce extends tt{constructor(s,h){super("./images/hero8attack.png",s,h,.8,100,0,6,128,128,"./images/hero8attack.png","./images/hero8hurt.png","./images/hero8dead.png","./images/mandrake-dust-cloud.png",6,3,8,4,20,"./images/hero8fireball.png",15);t(this,"shootInterval");t(this,"lastShotTime");this.shootInterval=1700,this.lastShotTime=700}heroMovement(){const s=Date.now();s-this.lastShotTime>=this.shootInterval&&(this.shoot(),this.lastShotTime=s)}shoot(){const s=new Z(this.x+this.width-30,this.y,2,this.projectileImageSrc,"fireball",60,60,0,12,128,128);x.push(s)}}const S=document.getElementById("canvas1"),X=S.getContext("2d"),W=new Audio;W.src="./sound/resouce-increase.mp3";const Et=[],R=[];let n=null;function N(e,i,s,h,a,m,d,c,v,T,L,z){const et=new Image;et.src=e;const it={x:i,y:s,width:64,height:64,imageSrc:e,frameX:0,frameY:0,eachWidth:m,eachHeight:d,firstFrame:h,lastFrame:a,image:et,heroClass:c,cost:v,name:T,imageX:L,imageY:z};return Et.push(it),it}N("./images/card1.png",64*4,0,0,21,128,128,ae,100,"Archer",64*4,0);N("./images/card2.png",64*5,0,0,11,128,128,re,100,"Wizard",64*5,0);N("./images/card3.png",64*6,0,0,19,128,128,me,100,"Swordsman",64*6,0);function Ze(){X.clearRect(0,0,S.width,S.height),Et.forEach(e=>{X.strokeStyle="black",X.strokeRect(e.x,e.y,e.width,e.height),X.fillStyle="purple",X.fillRect(e.x,e.y,e.width,e.height),r%7===0&&(e.frameX<e.lastFrame?e.frameX+=1:e.frameX=e.firstFrame),X.fillStyle="gold",X.font="8px Audiowide",X.fillText(`${e.name}`,e.x+5,e.y+10),X.fillText(`Cost:${e.cost}`,e.x+5,e.y+20),X.drawImage(e.image,e.eachWidth*e.frameX,0,e.eachWidth,e.eachHeight,e.imageX,e.imageY,e.width,e.height)})}const wt=new Set;function xt(e,i){const s=`${e},${i}`;return wt.has(s)}S.addEventListener("click",e=>{const i=S.getBoundingClientRect();let s=e.clientX-i.left,h=e.clientY-i.top;if(s=s-s%64,h=h-h%64,!n&&h==0||n&&h==0)Et.forEach(a=>{s>=a.x&&s<=a.x+a.width&&h>=a.y&&h<=a.y+a.height&&(n=a)});else{if(h>=64&&h<=564&&s>=128){if(n)if(n.cost>q)C.push(new dt("Not Enough Resources",S.width/2-200,S.height/2+50,50,1,"white"));else if(n.heroClass===me||n.heroClass===oe||n.heroClass===ne||n.heroClass===le){const a=new n.heroClass(s,h);R.push(a),q-=n.cost}else if(!xt(s,h)&&n.heroClass==ae||!xt(s,h)&&n.heroClass==re||!xt(s,h)&&n.heroClass==de||!xt(s,h)&&n.heroClass==ce){const a=new n.heroClass(s,h);R.push(a);const m=`${s},${h}`;wt.add(m),q-=n.cost}else C.push(new dt("Position Is Occupied",S.width/2-200,S.height/2+50,50,1,"white"))}else C.push(new dt("Invalid Position",S.width/2-200,S.height/2+50,50,1,"white"));n=null}});function _e(){for(var e=0;e<=R.length-1;e++)R[e].heroMovement(),R[e].draw(X);fe();for(let i=x.length-1;i>=0;i--)x[i]&&x[i].update(x[i]),x[i]&&x[i].draw(X)}setTimeout(()=>{N("./images/card4.png",64*7,0,0,9,96.4,98,oe,150,"Kings Guard",64*7,0)},0);let rt=[];function ti(){rt.forEach(e=>clearTimeout(e)),rt=[],rt.push(setTimeout(()=>{W.volume=.8,W.play(),N("./images/card5.png",64*8,0,0,11,96.4,98,ne,150,"Viking Hero",64*8,0)},81e3)),rt.push(setTimeout(()=>{W.volume=.8,W.play(),N("./images/card6.png",64*9,0,0,11,128.2,130,le,200,"Fighter",64*9,0)},81e3)),rt.push(setTimeout(()=>{W.volume=.8,W.play(),N("./images/card7.png",64*10,0,0,6,130,130,de,200,"Jinn",64*10,10)},16e4)),rt.push(setTimeout(()=>{W.volume=.8,W.play(),N("./images/card8.png",64*11,0,0,14,130,130,ce,200,"Wizard Girl",64*11,10)},16e4))}let q=400;function ei(){q=400}function ge(e){q+=e}function Pt(e){q-=e}let M=null,E=null;S.addEventListener("mousemove",e=>{const i=S.getBoundingClientRect();M=e.clientX-i.left,E=e.clientY-i.top,fe()});function fe(){M&&(M=M-M%64),E&&(E=E-E%64),n&&M!==null&&E!==null&&E>=64&&E<576&&M>=128&&(r%8===0&&(n.frameX<n.lastFrame?n.frameX+=1:n.frameX=n.firstFrame),X.strokeStyle="gold",X.strokeRect(M,E,64,64),X.drawImage(n.image,n.eachWidth*n.frameX,0,n.eachWidth,n.eachHeight,M,E-10,n.width,n.height))}const ue=document.getElementById("canvas1"),ii=ue.getContext("2d");var pe=new Image;pe.src="./images/projectilefortower.png";class si{constructor(i,s,h,a,m=0){t(this,"x");t(this,"y");t(this,"targetX");t(this,"targetY");t(this,"startX");t(this,"startY");t(this,"peakHeight");t(this,"speed");t(this,"progress");t(this,"width");t(this,"height");this.x=i,this.y=s,this.startX=i,this.startY=s,this.targetX=h,this.targetY=a,this.peakHeight=m,this.speed=(h>384,.8),this.progress=0,this.width=25,this.height=25}update(){this.progress+=this.speed;const i=Math.hypot(this.targetX-this.startX,this.targetY-this.startY),s=this.progress/i;this.x=this.startX+(this.targetX-this.startX)*s,this.y=this.startY+(this.targetY-this.startY)*s,s>=1&&(this.progress=i+ue.width)}draw(){ii.drawImage(pe,this.x,this.y,this.width,this.height)}}const hi=document.getElementById("canvas1"),mt=hi.getContext("2d");let ut=[],Kt=null;const ai="#00FF00",ri="#FF0000",b=class b{constructor(i,s,h,a,m,d,c){t(this,"height");t(this,"width");t(this,"x");t(this,"y");t(this,"firstFrame");t(this,"lastFrame");t(this,"frameX");t(this,"tower");t(this,"eachWidth");t(this,"eachHeight");t(this,"lastShootTime");t(this,"shootInterval");t(this,"defaultShootInterval");t(this,"collisionShootInterval");t(this,"isColliding");t(this,"health");t(this,"maxHealth");t(this,"dustCloudSprite");t(this,"dustCloudFrames");t(this,"dustCloudFrameIndex");t(this,"dustCloudFrameWidth");this.height=i,this.width=s,this.x=h,this.y=a,this.firstFrame=m,this.lastFrame=d,this.frameX=c,this.tower=new Image,this.tower.src="./images/tower.png",this.eachWidth=128,this.eachHeight=144,this.lastShootTime=0,this.defaultShootInterval=5e3,this.collisionShootInterval=100,this.shootInterval=this.defaultShootInterval,this.isColliding=!1,this.maxHealth=500,this.health=this.maxHealth,this.dustCloudSprite=new Image,this.dustCloudSprite.src="./images/mandrake-dust-cloud.png",this.dustCloudFrames=4,this.dustCloudFrameIndex=0,this.dustCloudFrameWidth=200}draw(){r%6===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame),mt.drawImage(this.tower,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height),this.drawHealthBar(),this.launchProjectile(),ut.forEach(i=>{i.update(),i.draw()})}launchProjectile(){const i=Date.now();let s=this.findNearestEnemy();if(s&&i-this.lastShootTime>this.shootInterval&&J.indexOf(this)===b.shooterIndex){const a=new si(this.x+60,this.y,s.x,s.y,100);ut.push(a),this.lastShootTime=i}}static updateShooter(){const i=Date.now();i-b.lastShooterChangeTime>b.shooterChangeInterval&&(b.shooterIndex=(b.shooterIndex+1)%J.length,b.lastShooterChangeTime=i)}findNearestEnemy(){let i=1/0;const s=Math.random()<.5?this.y:this.y+64;return u.forEach(h=>{if(h.y>=s&&h.y<=s+64){const a=Math.hypot(h.x-this.x,h.y-this.y);a<i&&a<=64*11&&(i=a,Kt=h)}}),Kt}drawHealthBar(){const i=this.width,s=8,h=this.x,a=this.y-s+4;mt.fillStyle=ri,mt.fillRect(h,a,i,s);const m=this.health/this.maxHealth;mt.fillStyle=ai,mt.fillRect(h,a,i*m,s),this.health<=0&&(r%20===0&&(this.frameX<4?this.frameX+=1:this.frameX=this.firstFrame),mt.drawImage(this.dustCloudSprite,200*this.frameX,0,200,179,this.x,this.y,this.width+20,this.height),setTimeout(()=>{y(J,this),console.log("Hello")},1e3))}checkCollisionWithEnemies(){this.isColliding=!1;for(let i of u)if(this.x<i.x+i.width&&this.x+this.width>i.x&&this.y<i.y+i.height&&this.y+this.height>i.y){i.speed=0,i.x=i.x+2,i.state="attacking",this.isColliding=!0,this.health-=10,this.shootInterval=this.collisionShootInterval;break}this.isColliding||(this.shootInterval=this.defaultShootInterval),this.checkCollisionWithVillainProjectiles()}checkCollisionWithVillainProjectiles(){for(let i of I)if(this.x<i.x+i.width&&this.x+this.width>i.x&&this.y<i.y+i.height&&this.y+this.height>i.y){this.health-=5,this.shootInterval=this.collisionShootInterval,y(I,i);break}this.isColliding||(this.shootInterval=this.defaultShootInterval),console.log(`Tower at (${this.x}, ${this.y}) checked for collision with projectiles, health: ${this.health}`)}};t(b,"shooterIndex",0),t(b,"shooterChangeInterval",3e3),t(b,"lastShooterChangeTime",Date.now());let K=b;const J=[new K(128,128,0,64,0,11,0),new K(128,128,0,192,0,11,0),new K(128,128,0,320,0,11,0),new K(128,128,0,448,0,11,0)];function mi(){K.updateShooter(),J.forEach(e=>{e.draw(),e.checkCollisionWithEnemies()})}const U=document.getElementById("canvas1"),F=U.getContext("2d"),Gt=[];let g=null,A=[];function Lt(e,i,s,h,a,m,d,c,v,T,L,z,et,it,Rt,Mt){const yt=new Image;yt.src=e;const Xt={x:i,y:s,width:h,height:a,imageSrc:e,frameX:m,frameY:d,eachWidth:c,eachHeight:v,firstFrame:T,lastFrame:L,image:yt,cost:z,name:et,imageX:it,imageY:Rt,classType:Mt};return Gt.push(Xt),Xt}Lt("./images/rocketpowerup.png",64*13,0,64,64,0,0,128,128,0,3,1e3,"Rocket",64*13,0,"PowerupType1");Lt("./images/landmine.png",64*14,0,64,64,0,0,368,383,0,0,500,"Land-Mine",64*14,0,"PowerupType2");Lt("./images/pipebomb.png",64*15,0,64,64,0,0,368,383,0,3,500,"Pipe-bomb",64*15,0,"PowerupType3");function oi(){Gt.forEach(e=>{F.strokeStyle="white",F.strokeRect(e.x,e.y,e.width,e.height),F.fillStyle="grey",F.fillRect(e.x,e.y,e.width,e.height),r%9===0&&(e.frameX<e.lastFrame?e.frameX+=1:e.frameX=e.firstFrame),F.fillStyle="white",F.font="8px Audiowide",F.fillText(`${e.name}`,e.x+11,e.y+10),F.fillText(`Cost: ${e.cost}`,e.x+11,e.y+20),F.drawImage(e.image,e.eachWidth*e.frameX,0,e.eachWidth,e.eachHeight,e.imageX+10,e.imageY+20,e.width-20,e.height-20)})}let P=null,$=null;U.addEventListener("mousemove",e=>{const i=U.getBoundingClientRect();P=e.clientX-i.left,$=e.clientY-i.top,we()});function we(){P=P?P-P%64:null,$=$?$-$%64:null,g&&P!==null&&$!==null&&$>=64&&$<576&&P>=128&&(F.strokeStyle="gold",F.strokeRect(P,$,64,64),F.drawImage(g.image,g.eachWidth*g.frameX,0,g.eachWidth,g.eachHeight,P+10,$+10,g.width-20,g.height-20))}class Bt{constructor(i,s,h,a,m,d,c,v,T){t(this,"x");t(this,"y");t(this,"type");t(this,"image");t(this,"firstFrame");t(this,"lastFrame");t(this,"eachWidth");t(this,"eachHeight");t(this,"frameX");t(this,"frameY");t(this,"width");t(this,"height");t(this,"speed");this.x=i,this.y=s,this.type=h,this.image=new Image,this.image.src=a,this.eachWidth=c,this.eachHeight=v,this.firstFrame=m,this.lastFrame=d,this.frameX=m,this.frameY=0,this.width=64,this.height=64,this.speed=T}draw(i){r%7===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame),i.drawImage(this.image,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x+10,this.y+10,this.width-20,this.height-20)}movement(){this.x+=this.speed}}U.addEventListener("click",e=>{const i=U.getBoundingClientRect();let s=e.clientX-i.left,h=e.clientY-i.top;if(s=s-s%64,h=h-h%64,!g&&h==0||g&&h==0)Gt.forEach(a=>{s>=a.x&&s<=a.x+a.width&&h>=a.y&&h<=a.y+a.height&&(g=a)});else{if(g&&h>=64&&h<=564&&s>=128)if(g.cost>q)C.push(new dt("Not Enough Resources",U.width/2-200,U.height/2+50,50,1,"white"));else{if(g.classType==="PowerupType1"){const a=new Bt(s,h,g.classType,g.imageSrc,0,3,128,128,2);A.push(a),Pt(g.cost)}if(g.classType==="PowerupType2"){const a=new Bt(s,h,g.classType,g.imageSrc,0,0,368,383,0);A.push(a),Pt(g.cost)}if(g.classType==="PowerupType3"){const a=new Bt(s,h,g.classType,g.imageSrc,0,3,368,383,3);A.push(a),Pt(g.cost)}}g=null}});function ni(){for(let e=0;e<=A.length-1;e++)A[e].draw(F),A[e].movement(),A[e].x>U.width&&y(A,A[e]);we()}const Vt=document.getElementById("canvas1"),Dt=Vt.getContext("2d");function li(){Dt.fillStyle="white",Dt.font="17px Audiowide",Dt.fillText("Coins: "+q,0,30)}function di(){for(let e of R)for(let i of u)e.x<i.x+i.width&&e.x+e.width>i.x&&e.y<i.y+i.height&&e.y+e.height>i.y&&(i.isCollidingWithHero=!0,i.isCollidingWithVillain=!1,(e.speed>0&&e.x<i.x||e.speed<0&&e.x>i.x)&&(e.speed=0,i.speed=0,e.state="attacking",i.state="attacking",ci(e,i)))}function ci(e,i){let s=!0;const h=setInterval(()=>{e.health<=0||i.health<=0?(clearInterval(h),e.health<=0?(e.state="dead",setTimeout(()=>{e.state="dustcloud"},400),setTimeout(()=>{i.speed=i.moment,y(R,e);const m=`${e.x},${e.y}`;wt.delete(m)},1500)):e.state="idle",i.health<=0?(i.state="dead",setTimeout(()=>{i.state="dustcloud",e.state="idle"},400),setTimeout(()=>{e.speed=e.moment,y(u,i)},800)):i.state="idle"):(s?(e.state="attacking",i.state="hurt"):(e.state="hurt",i.state="attacking"),s=!s)},700),a=setInterval(()=>{e.health<=0||i.health<=0?clearInterval(a):(e.health-=e.endurance,i.health-=i.endurance)},500)}function y(e,i){console.log(i);const s=e.indexOf(i);if(s>-1&&(e.splice(s,1),i.type==="enemy")){const h=i.pointsAwarded||0;C.push(new dt(`+ ${h}`,Vt.width/2-10,Vt.height/2+50,50,1,"white"));let a=new Audio;a.src="./sound/resourceincrease.mp3",a.play(),a.volume=.9,ge(h)}}function gi(){for(let e of u)for(let i of x)i.x<e.x+e.width&&i.x+i.width>e.x&&i.y<e.y+e.height&&i.y+i.height>e.y&&(y(x,i),e.health-=e.endurance,e.health<=0?(e.state="dead",e.speed=0,setTimeout(()=>{e.state="dustcloud",setTimeout(()=>{y(u,e)},500)},500)):(e.state="hurt",e.speed=0,setTimeout(()=>{e.state="idle",e.speed=e.moment},500)))}function fi(){for(let e of u)for(let i of A)i.x<e.x+e.width&&i.x+i.width>e.x&&i.y<e.y+e.height&&i.y+i.height>e.y&&(i.type==="PowerupType1"?e.health=0:i.type==="PowerupType2"?(e.health=0,y(A,i)):i.type==="PowerupType3"&&(i.x+=e.width,e.health-=20),e.health<=0&&(e.state="dead",e.speed=0,setTimeout(()=>{e.state="dustcloud",setTimeout(()=>{y(u,e)},602)},590)))}function ui(){for(let e of J)for(let i of u)e.x<i.x+i.width&&e.x+e.width>i.x&&e.y<i.y+i.height&&e.y+e.height>i.y&&(i.speed=0,i.x=i.x,i.state="attacking")}function pi(){for(let e of ut)for(let i of u)e.x<i.x+i.width&&e.x+e.width>i.x&&e.y<i.y+i.height&&e.y+e.height>i.y&&(y(ut,e),i.health-=i.endurance,i.health<=0?(i.state="dead",i.speed=0,setTimeout(()=>{i.state="dustcloud",setTimeout(()=>{y(u,i)},500)},500)):(i.state="hurt",i.speed=0,setTimeout(()=>{i.state="idle",i.speed=i.moment},500)))}function wi(){for(let e of I)for(let i of R)i.x<e.x+e.width&&i.x+i.width>e.x&&i.y<e.y+e.height&&i.y+i.height>e.y&&(y(I,e),i.health-=i.endurance,i.health<=0?(i.state="dead",i.speed=0,setTimeout(()=>{i.state="dustcloud",setTimeout(()=>{y(R,i);const s=`${i.x},${i.y}`;wt.delete(s)},500)},500)):(i.state="hurt",i.speed=0,setTimeout(()=>{i.state="idle",i.speed=i.moment},500)))}const at=document.getElementById("canvas1"),Ot=at.getContext("2d"),Ie=new Image;Ie.src="./images/mandrake.png";const Ii=new Image;Ii.src="./images/mandrake-dust-cloud.png";const Ct=64,ot=64,yi=110;let Ut=[50,60,70,80],st=[];class Xi{constructor(i,s,h){t(this,"x");t(this,"y");t(this,"size");t(this,"gamePoint");t(this,"creationTime");t(this,"frameX");t(this,"frameY");t(this,"spriteWidth");t(this,"spriteHeight");t(this,"minFrame");t(this,"maxFrame");this.x=i,this.y=s,this.size=h,this.gamePoint=Ut[Math.floor(Math.random()*Ut.length)],this.creationTime=Date.now(),this.frameX=0,this.frameY=0,this.spriteWidth=256,this.spriteHeight=256,this.minFrame=0,this.maxFrame=355}draw(i){r%1===0&&(this.frameX++,this.frameX>=18&&(this.frameX=0,this.frameY++,this.frameY>=18&&(this.frameY=0))),Ot.drawImage(Ie,this.frameX*this.spriteWidth,this.frameY*this.spriteHeight,this.spriteWidth,this.spriteHeight,this.x+(Ct-this.size)/2,this.y+(ot-this.size)/2,ot*2,ot*2),i.fillStyle="gold",Ot.font="15px Audiowide",i.fillText(this.gamePoint.toString(),this.x+25,this.y)}isExpired(){return Date.now()-this.creationTime>5500}isHovered(i,s,h){const a=i>=this.x&&i<=this.x+Ct*1.3&&s>=this.y&&s<=this.y+ot*1.3;if(a){C.push(new dt(`+ ${h.gamePoint}`,at.width/2,at.height/2+50,50,1,"white")),ge(h.gamePoint);let m=new Audio;m.src="./sound/resourceincrease.mp3",m.play(),m.volume=.9}return a}}function xi(){const e=at.width/Ct,i=at.height/ot,s=Math.floor(Math.random()*(e-2))+2,h=Math.floor(Math.random()*(i-1))+1,a=s*Ct,m=h*ot;return{x:a,y:m}}function Fi(){const{x:e,y:i}=xi(),s=new Xi(e,i,yi);st.push(s)}function Si(){st=st.filter(e=>!e.isExpired());for(let e of st)e.draw(Ot)}at.addEventListener("mousemove",e=>{const i=at.getBoundingClientRect(),s=e.clientX-i.left,h=e.clientY-i.top;st=st.filter(a=>!a.isHovered(s,h,a))});function ki(e,i){e.fillStyle="gold",e.font="50px Audiowide",k<=3?e.fillText(`Siege Wave ${k} incoming get ready`,i.width/2-350,i.height/2+60):e.fillText("Kill them all!",i.width/2-200,i.height/2+100)}const ct=[],ye=new Image;ye.src="./images/golemrun.png";ct.push(ye);const Xe=new Image;Xe.src="./images/fireballrun.png";ct.push(Xe);const xe=new Image;xe.src="./images/monsterdogwalk.png";ct.push(xe);const Ci=document.getElementById("canvas1"),f=Ci.getContext("2d");class Wi extends V{constructor(s,h){super(s,h,O,G);t(this,"type");t(this,"speed");t(this,"moment");t(this,"health");t(this,"pointsAwarded");t(this,"frameX");t(this,"frameY");t(this,"eachWidth");t(this,"eachHeight");t(this,"firstFrame");t(this,"lastFrame");t(this,"enemytype");t(this,"state");t(this,"attackAnimationFrames");t(this,"hurtAnimationFrames");t(this,"deathAnimationFrames");t(this,"dustCloudAnimationFrames");t(this,"attackImageSrc");t(this,"hurtImageSrc");t(this,"deathImageSrc");t(this,"dustCloudImageSrc");t(this,"attackImage");t(this,"hurtImage");t(this,"deathImage");t(this,"dustCloudImage");t(this,"endurance");t(this,"isCollidingWithVilan");t(this,"isCollidingWithHero");this.speed=.4,this.type="enemy",this.moment=this.speed,this.health=120,this.pointsAwarded=this.health,this.frameX=0,this.frameY=0,this.eachWidth=900,this.eachHeight=900,this.firstFrame=0,this.lastFrame=11,this.enemytype=ct[0],this.attackAnimationFrames=3,this.hurtAnimationFrames=1,this.deathAnimationFrames=4,this.dustCloudAnimationFrames=4,this.attackImageSrc="./images/golemattack.png",this.hurtImageSrc="./images/golemhurt.png",this.deathImageSrc="./images/golemdead.png",this.dustCloudImageSrc="./images/mandrake-dust-cloud.png",this.attackImage=new Image,this.attackImage.src=this.attackImageSrc,this.hurtImage=new Image,this.hurtImage.src=this.hurtImageSrc,this.deathImage=new Image,this.deathImage.src=this.deathImageSrc,this.dustCloudImage=new Image,this.dustCloudImage.src=this.dustCloudImageSrc,this.state="idle",this.endurance=20,this.isCollidingWithVilan=!1,this.isCollidingWithHero=!1}enemyMovement(){this.x=this.x-this.speed,r%5===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}draw(){switch(f.fillStyle="gold",f.font="10px Arial",f.fillText(this.health.toString(),this.x+25,this.y+10),this.state){case"idle":r%17===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame),f.drawImage(this.enemytype,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"attacking":r%10===0&&(this.frameX<this.attackAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),f.drawImage(this.attackImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"hurt":r%8===0&&(this.frameX<this.hurtAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),f.drawImage(this.hurtImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"dead":r%10===0&&(this.frameX<this.deathAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),f.drawImage(this.deathImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"dustcloud":r%8===0&&(this.frameX<this.dustCloudAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),f.drawImage(this.dustCloudImage,200*this.frameX,0,200,179,this.x,this.y,this.width,this.height);break}}}class Ai extends V{constructor(s,h){super(s,h,O,G);t(this,"type");t(this,"speed");t(this,"moment");t(this,"health");t(this,"pointsAwarded");t(this,"frameX");t(this,"frameY");t(this,"eachWidth");t(this,"eachHeight");t(this,"firstFrame");t(this,"lastFrame");t(this,"enemytype");t(this,"state");t(this,"attackAnimationFrames");t(this,"hurtAnimationFrames");t(this,"deathAnimationFrames");t(this,"dustCloudAnimationFrames");t(this,"attackImageSrc");t(this,"hurtImageSrc");t(this,"deathImageSrc");t(this,"dustCloudImageSrc");t(this,"attackImage");t(this,"hurtImage");t(this,"deathImage");t(this,"dustCloudImage");t(this,"endurance");t(this,"isCollidingWithVilan");t(this,"isCollidingWithHero");this.speed=.4,this.moment=this.speed,this.health=120,this.type="enemy",this.pointsAwarded=this.health,this.frameX=0,this.frameY=0,this.eachWidth=128,this.eachHeight=128,this.firstFrame=0,this.lastFrame=20,this.enemytype=ct[1],this.attackAnimationFrames=23,this.hurtAnimationFrames=2,this.deathAnimationFrames=4,this.dustCloudAnimationFrames=4,this.attackImageSrc="./images/fireballattack.png",this.hurtImageSrc="./images/fireballhurt.png",this.deathImageSrc="./images/fireballdead.png",this.dustCloudImageSrc="./images/mandrake-dust-cloud.png",this.attackImage=new Image,this.attackImage.src=this.attackImageSrc,this.hurtImage=new Image,this.hurtImage.src=this.hurtImageSrc,this.deathImage=new Image,this.deathImage.src=this.deathImageSrc,this.dustCloudImage=new Image,this.dustCloudImage.src=this.dustCloudImageSrc,this.state="idle",this.endurance=20,this.isCollidingWithVilan=!1,this.isCollidingWithHero=!1}enemyMovement(){this.x=this.x-this.speed,r%5===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}draw(){switch(f.fillStyle="gold",f.font="10px Arial",f.fillText(this.health.toString(),this.x+35,this.y+10),this.state){case"idle":r%17===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame),f.drawImage(this.enemytype,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-10,this.width+30,this.height+30);break;case"attacking":r%10===0&&(this.frameX<this.attackAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),f.drawImage(this.attackImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"hurt":r%8===0&&(this.frameX<this.hurtAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),f.drawImage(this.hurtImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"dead":r%10===0&&(this.frameX<this.deathAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),f.drawImage(this.deathImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"dustcloud":r%8===0&&(this.frameX<this.dustCloudAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),f.drawImage(this.dustCloudImage,200*this.frameX,0,200,179,this.x,this.y,this.width,this.height);break}}}class vi extends V{constructor(s,h){super(s,h,O,G);t(this,"speed");t(this,"type");t(this,"moment");t(this,"health");t(this,"pointsAwarded");t(this,"frameX");t(this,"frameY");t(this,"eachWidth");t(this,"eachHeight");t(this,"firstFrame");t(this,"lastFrame");t(this,"enemytype");t(this,"state");t(this,"attackAnimationFrames");t(this,"hurtAnimationFrames");t(this,"deathAnimationFrames");t(this,"dustCloudAnimationFrames");t(this,"attackImageSrc");t(this,"hurtImageSrc");t(this,"deathImageSrc");t(this,"dustCloudImageSrc");t(this,"attackImage");t(this,"hurtImage");t(this,"deathImage");t(this,"dustCloudImage");t(this,"endurance");t(this,"isCollidingWithVilan");t(this,"isCollidingWithHero");this.speed=.4,this.moment=this.speed,this.health=120,this.type="enemy",this.pointsAwarded=this.health,this.frameX=0,this.frameY=0,this.eachWidth=96,this.eachHeight=96,this.firstFrame=0,this.lastFrame=5,this.enemytype=ct[2],this.attackAnimationFrames=11,this.hurtAnimationFrames=3,this.deathAnimationFrames=5,this.dustCloudAnimationFrames=4,this.attackImageSrc="./images/monsterdogattack.png",this.hurtImageSrc="./images/monterdoghurt.png",this.deathImageSrc="./images/monsterdogdeath.png",this.dustCloudImageSrc="./images/mandrake-dust-cloud.png",this.attackImage=new Image,this.attackImage.src=this.attackImageSrc,this.hurtImage=new Image,this.hurtImage.src=this.hurtImageSrc,this.deathImage=new Image,this.deathImage.src=this.deathImageSrc,this.dustCloudImage=new Image,this.dustCloudImage.src=this.dustCloudImageSrc,this.state="idle",this.endurance=20,this.isCollidingWithVilan=!1,this.isCollidingWithHero=!1}enemyMovement(){this.x=this.x-this.speed,r%5===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}draw(){switch(f.fillStyle="gold",f.font="10px Arial",f.fillText(this.health.toString(),this.x+35,this.y+10),this.state){case"idle":r%17===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame),f.drawImage(this.enemytype,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-30,this.width+10,this.height+20);break;case"attacking":r%10===0&&(this.frameX<this.attackAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),f.drawImage(this.attackImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-30,this.width+10,this.height+20);break;case"hurt":r%8===0&&(this.frameX<this.hurtAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),f.drawImage(this.hurtImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-30,this.width+10,this.height+20);break;case"dead":r%10===0&&(this.frameX<this.deathAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),f.drawImage(this.deathImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-30,this.width+10,this.height+20);break;case"dustcloud":r%8===0&&(this.frameX<this.dustCloudAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),f.drawImage(this.dustCloudImage,200*this.frameX,0,200,179,this.x,this.y,this.width,this.height);break}}}const Ti=[Wi,Ai,vi],$t=[],Fe=new Image;Fe.src="./images/witchattack.png";$t.push(Fe);const Se=new Image;Se.src="./images/ssrun.png";$t.push(Se);const Hi=document.getElementById("canvas1"),w=Hi.getContext("2d");class bi extends V{constructor(s,h){super(s,h,O,G);t(this,"type");t(this,"speed");t(this,"moment");t(this,"health");t(this,"pointsAwarded");t(this,"frameX");t(this,"frameY");t(this,"eachWidth");t(this,"eachHeight");t(this,"firstFrame");t(this,"lastFrame");t(this,"enemytype");t(this,"state");t(this,"attackAnimationFrames");t(this,"hurtAnimationFrames");t(this,"deathAnimationFrames");t(this,"dustCloudAnimationFrames");t(this,"attackImageSrc");t(this,"hurtImageSrc");t(this,"deathImageSrc");t(this,"dustCloudImageSrc");t(this,"attackImage");t(this,"hurtImage");t(this,"deathImage");t(this,"dustCloudImage");t(this,"endurance");t(this,"isCollidingWithVilan");t(this,"isCollidingWithHero");t(this,"projectileImageSrc");t(this,"shootInterval");t(this,"lastShotTime");this.type="enemy",this.speed=.4,this.moment=this.speed,this.health=120,this.pointsAwarded=this.health,this.frameX=0,this.frameY=0,this.eachWidth=128,this.eachHeight=128,this.firstFrame=0,this.lastFrame=14,this.enemytype=$t[0],this.attackAnimationFrames=9,this.hurtAnimationFrames=1,this.deathAnimationFrames=9,this.dustCloudAnimationFrames=4,this.attackImageSrc="./images/witchattack2.png",this.hurtImageSrc="./images/witchhurt.png",this.deathImageSrc="./images/witchdead.png",this.dustCloudImageSrc="./images/mandrake-dust-cloud.png",this.attackImage=new Image,this.attackImage.src=this.attackImageSrc,this.hurtImage=new Image,this.hurtImage.src=this.hurtImageSrc,this.deathImage=new Image,this.deathImage.src=this.deathImageSrc,this.dustCloudImage=new Image,this.dustCloudImage.src=this.dustCloudImageSrc,this.state="idle",this.endurance=20,this.isCollidingWithVilan=!1,this.isCollidingWithHero=!1,this.shootInterval=1100,this.lastShotTime=300,this.projectileImageSrc="./images/witchfireball.png"}shoot(){const s=new Z(this.x+this.width-150,this.y,-3,this.projectileImageSrc,"fireball",60,70,0,10,64,64);I.push(s)}enemyMovement(){const s=Date.now();s-this.lastShotTime>=this.shootInterval&&(console.log("Hello"),console.log(this.shootInterval),this.shoot(),this.lastShotTime=s),this.x=this.x-this.speed,r%5===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}draw(){switch(w.fillStyle="gold",w.font="8px Audiowide",w.fillText(this.health.toString(),this.x+15,this.y),this.state){case"idle":r%50===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame),w.drawImage(this.enemytype,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x-20,this.y-20,this.width+10,this.height+10);break;case"attacking":r%10===0&&(this.frameX<this.attackAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),w.drawImage(this.attackImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x-20,this.y-20,this.width+10,this.height+10);break;case"hurt":r%8===0&&(this.frameX<this.hurtAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),w.drawImage(this.hurtImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x-20,this.y-20,this.width+10,this.height+10);break;case"dead":r%10===0&&(this.frameX<this.deathAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),w.drawImage(this.deathImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x-20,this.y-20,this.width+10,this.height+10);break;case"dustcloud":r%8===0&&(this.frameX<this.dustCloudAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),w.drawImage(this.dustCloudImage,200*this.frameX,0,200,179,this.x-20,this.y-20,this.width+10,this.height+10);break}}}class Yi extends V{constructor(s,h){super(s,h,O,G);t(this,"type");t(this,"speed");t(this,"moment");t(this,"health");t(this,"pointsAwarded");t(this,"frameX");t(this,"frameY");t(this,"eachWidth");t(this,"eachHeight");t(this,"firstFrame");t(this,"lastFrame");t(this,"enemytype");t(this,"state");t(this,"attackAnimationFrames");t(this,"hurtAnimationFrames");t(this,"deathAnimationFrames");t(this,"dustCloudAnimationFrames");t(this,"attackImageSrc");t(this,"hurtImageSrc");t(this,"deathImageSrc");t(this,"dustCloudImageSrc");t(this,"attackImage");t(this,"hurtImage");t(this,"deathImage");t(this,"dustCloudImage");t(this,"endurance");t(this,"isCollidingWithVilan");t(this,"isCollidingWithHero");t(this,"projectileImageSrc");t(this,"shootInterval");t(this,"lastShotTime");this.type="enemy",this.speed=.4,this.moment=this.speed,this.health=120,this.pointsAwarded=this.health,this.frameX=0,this.frameY=0,this.eachWidth=128,this.eachHeight=128,this.firstFrame=0,this.lastFrame=5,this.enemytype=$t[1],this.attackAnimationFrames=7,this.hurtAnimationFrames=2,this.deathAnimationFrames=4,this.dustCloudAnimationFrames=4,this.attackImageSrc="./images/ssattack.png",this.hurtImageSrc="./images/sshurt.png",this.deathImageSrc="./images/ssdead.png",this.dustCloudImageSrc="./images/mandrake-dust-cloud.png",this.attackImage=new Image,this.attackImage.src=this.attackImageSrc,this.hurtImage=new Image,this.hurtImage.src=this.hurtImageSrc,this.deathImage=new Image,this.deathImage.src=this.deathImageSrc,this.dustCloudImage=new Image,this.dustCloudImage.src=this.dustCloudImageSrc,this.state="idle",this.endurance=20,this.isCollidingWithVilan=!1,this.isCollidingWithHero=!1,this.shootInterval=1200,this.lastShotTime=300,this.projectileImageSrc="./images/witchfireball.png"}enemyMovement(){this.x=this.x-this.speed,r%5===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}draw(){switch(w.fillStyle="gold",w.font="8px Audiowide",w.fillText(this.health.toString(),this.x-2,this.y),this.state){case"idle":r%500===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame),w.drawImage(this.enemytype,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x-50,this.y-40,this.width+50,this.height+30);break;case"attacking":r%10===0&&(this.frameX<this.attackAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),w.drawImage(this.attackImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x-50,this.y-40,this.width+50,this.height+30);break;case"hurt":r%8===0&&(this.frameX<this.hurtAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),w.drawImage(this.hurtImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x-50,this.y-40,this.width+50,this.height+30);break;case"dead":r%10===0&&(this.frameX<this.deathAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),w.drawImage(this.deathImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x-50,this.y-40,this.width+50,this.height+30);break;case"dustcloud":r%8===0&&(this.frameX<this.dustCloudAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),w.drawImage(this.dustCloudImage,200*this.frameX,0,200,179,this.x-50,this.y-40,this.width+50,this.height+30);break}}}const Ei=[bi,Yi],B=document.getElementById("canvas1"),H=B.getContext("2d"),Wt=B.width/2-100,At=B.height/2-25,ke=200,Ce=50;function $i(){H.fillStyle="#333",H.fillRect(0,0,B.width,B.height),H.font="25px Audiowide",H.fillStyle="red",H.fillText("Game Over",B.width/2-150,150),H.fillStyle="#4CAF50",H.fillRect(Wt,At+100,ke,Ce),H.fillStyle="white",H.font="25px Audiowide",H.fillStyle="red",H.fillText("Restart",Wt+50,At+135),B.addEventListener("click",We)}function We(e){const i=B.getBoundingClientRect(),s=e.clientX-i.left,h=e.clientY-i.top;s>=Wt&&s<Wt+ke&&h>=At+100&&h<At+100+Ce&&(Nt(),It(),ji())}function ji(){B.removeEventListener("click",We)}const Ri=document.getElementById("canvas1"),Mi=Ri.getContext("2d");let jt=[];class Pi{constructor(i,s,h,a,m,d,c,v,T){t(this,"height");t(this,"width");t(this,"x");t(this,"y");t(this,"image");t(this,"numXFrames");t(this,"numYFrames");t(this,"spriteWidth");t(this,"spriteHeight");t(this,"cardFrameX");t(this,"cardFrameY");t(this,"lastFrameTime");this.height=i,this.width=s,this.x=h,this.y=a,this.image=new Image,this.image.src=m,this.spriteWidth=v,this.spriteHeight=T,this.numXFrames=d,this.numYFrames=c,this.lastFrameTime=Date.now(),this.cardFrameX=10,this.cardFrameY=0}draw(){r%5===0&&(this.cardFrameX++,this.cardFrameX>=this.numXFrames&&(this.cardFrameX=0,this.cardFrameY++,this.cardFrameY>=this.numYFrames&&(this.cardFrameY=0))),Mi.drawImage(this.image,this.cardFrameX*this.spriteWidth,this.cardFrameY*this.spriteHeight,this.spriteWidth,this.spriteHeight,this.x,this.y,this.width,this.height)}}class zt extends Pi{constructor(i,s){super(100,130,i,s,"./images/tree2.png",28,0,519,549)}}function Bi(){jt.forEach(e=>{e.draw()})}jt.push(new zt(1200,79));jt.push(new zt(600,200));jt.push(new zt(300,390));const D=document.getElementById("canvas1"),Y=D.getContext("2d"),vt=D.width/2-100,Tt=D.height/2-25,Ae=200,ve=50;function Di(){Y.fillStyle="#333",Y.fillRect(0,0,D.width,D.height),Y.font="40px Audiowide",Y.fillStyle="green",Y.fillText("GOOD JOB DEFENDING THE TOWER YOU DID IT",D.width/2-550,100),Y.fillStyle="red",Y.fillRect(vt+500,Tt+300,Ae,ve),Y.font="25px Audiowide",Y.fillStyle="white",Y.fillText("Restart",vt+550,Tt+330),D.addEventListener("click",Te)}function Te(e){const i=D.getBoundingClientRect(),s=e.clientX-i.left,h=e.clientY-i.top;s>=vt+550&&s<vt+Ae+550&&h>=Tt+300&&h<Tt+300+ve&&(Nt(),It(),Vi())}function Vi(){D.removeEventListener("click",Te)}const p=document.getElementById("canvas1"),l=p.getContext("2d"),Oi=[{x:64,y:0},{x:192,y:0},{x:320,y:0},{x:448,y:0}];p.height=576;p.width=1344;var nt=new Audio;nt.src="./sound/maintheme.mp3";let r=0;const O=64,G=64,Gi=new Image;Gi.src="./images/hovertile.png";let k=1,j=[];const Q=64*2,qt=20,Ft=p.width-Q-20,St=20;let pt=Q;const Jt=2,Li="#333";l.font="25px Audiowide";let kt="",He=[];j.push(...he);const lt=[];function be(){for(let e=0;e<lt.length;e++)lt[e].draw()}const Ht=p.width/2-100,bt=p.height/2-25,Ye=200,Ee=50;let ht=!1,Yt=0,Qt=80,Zt=1;function $e(){l.fillStyle="#4CAF50",l.fillRect(Ht,bt+200,Ye,Ee),l.fillStyle="white",l.font="25px Audiowide",l.fillText("Start Game",Ht+20,bt+235)}function je(){l.fillStyle="#333",l.fillRect(0,0,p.width,p.height),l.fillStyle="#FFD700",l.font="60px Audiowide",l.fillStyle="red",l.fillText("Siege Guardians",p.width/2-260,100),l.font="20px Audiowide",l.fillStyle="gold";const e=["Instructions:","1. Select a hero, hover over the game board and click on the gameboard to drop it.","2. Enemies come in waves.","3. After each wave, two new heroes will be awarded.","4. Mandrake appears at intervals across the game board. Hover over it to collect coins.","5. If all the 4 towers are destroyed, the game is over.","6. All the hero's have different abilities and different damage taking capabilities.","7. Three powerup's are available, use them wisely.","8. Watch out for the towers health because if all 4 are destroyed its GAME OVER.","9. Survive the three waves of enemies and VICTORY IS YOURS","10. Towers also shoot projectiles if the enemies are in range"];for(let i=0;i<e.length;i++)l.fillText(e[i],p.width/2-430,150+i*30)}p.addEventListener("click",function(e){console.log("Hello");const i=p.getBoundingClientRect(),s=e.clientX-i.left,h=e.clientY-i.top;s>=Ht&&s<Ht+Ye&&h>=bt+200&&h<bt+200+Ee&&(ht||(ht=!0,Yt=Date.now(),Nt(),It()))});p.addEventListener("mousemove",function(e){if(!ht)return;const i=p.getBoundingClientRect(),s=e.clientX-i.left,h=e.clientY-i.top;let a=null,m=null;for(let d=0;d<lt.length;d++){const c=lt[d];if(s>=c.x&&s<c.x+c.width&&h>=c.y&&h<c.y+c.height){a=c.y,m=c.x;break}}for(let d=0;d<lt.length;d++){const c=lt[d];c.x===m||c.y===a?c.isHovered=!0:c.isHovered=!1}be()});function Nt(){nt.play(),W.pause(),Et.length=4,A.length=0,C.length=0,ft=5e3,ut.length=0,st.length=0,x.length=0,wt.clear(),R.length=0,J.length=0,Oi.forEach(e=>{J.push(new K(128,128,0,e.x,e.y,11,0))}),console.log(ht),r=0,pt=Q,I.length=0,k=1,console.log(ht),u.length=0,r=0,pt=Q,k=1,j=[...he],He=[],Yt=Date.now(),ht=!0,ei(),ti()}function It(){if(l.clearRect(0,0,p.width,p.height),!ht){je(),$e();return}if(J.length===0){nt.pause(),W.pause(),$i();return}if(k>3&&u.length===0){nt.pause(),W.pause(),Di();return}nt.volume=.1,nt.play(),fi(),Ze(),be(),li(),_e(),Qe(),qe(),ni(),k<=3&&Ui(),r++;let e=(Date.now()-Yt)/1e3;if(pt=Q-e/Qt*Q,k<3?(l.font="25px Audiowide",kt="Next wave in"):k===3?kt="Survive for":(l.font="25px Audiowide",l.fillStyle="red",kt="Kill them all!"),e<Zt&&ki(l,p),Si(),di(),gi(),ui(),pi(),wi(),e>=Qt+Zt&&k<=3){switch(pt=Q,Yt=Date.now(),k++,k){case 2:j.push(...Ti);break;case 3:j.push(...Ei);break}j=Re(j)}oi(),mi(),k<=3?zi():(l.font="30px Audiowide",l.fillStyle="black",l.fillText("Kill them all!",Ft-100,St+20)),Bi(),requestAnimationFrame(It)}function zi(){k<=3&&(l.fillStyle=Li,l.fillRect(Ft,St,Q,qt),l.fillStyle="red",l.fillRect(Ft+2,St+Jt,pt-2,qt-2*Jt),l.fillStyle="white",l.font="20px Audiowide",l.fillText(kt,Ft-150,St+15))}const Ni=[64,128,192,256,320,384,448,512,576],Ki=8;let ft=5e3,_t=-ft;function Ui(){const e=Date.now();if(e-_t>ft){_t=e;const i=Math.floor(Math.random()*Ki),s=Ni[i],h=Math.floor(Math.random()*j.length),a=new j[h](p.width,s);u.push(a),He.push(a),ft>2500&&(ft-=100),j=Re(j)}}function Re(e){for(let i=e.length-1;i>0;i--){const s=Math.floor(Math.random()*(i+1));[e[i],e[s]]=[e[s],e[i]]}return e}je();$e();setInterval(Fi,5e3);var qi=new Audio;qi.src="./sound/maintheme.mp3";Ge();It();
