var he=Object.defineProperty;var ae=(i,e,s)=>e in i?he(i,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[e]=s;var t=(i,e,s)=>ae(i,typeof e!="symbol"?e+"":e,s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))h(a);new MutationObserver(a=>{for(const m of a)if(m.type==="childList")for(const g of m.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&h(g)}).observe(document,{childList:!0,subtree:!0});function s(a){const m={};return a.integrity&&(m.integrity=a.integrity),a.referrerPolicy&&(m.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?m.credentials="include":a.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function h(a){if(a.ep)return;a.ep=!0;const m=s(a);fetch(a.href,m)}})();const re=document.getElementById("gameScreen");function me(){re.style.display="flex"}const ne=document.getElementById("canvas1"),n=ne.getContext("2d");let S=[],W=[],u=[];const xt=new Image;xt.src="./images/enemy1.png";W.push(xt);const Ft=new Image;Ft.src="./images/battleturtleattack.png";W.push(Ft);const kt=new Image;kt.src="./images/enemy3.png";W.push(kt);const St=new Image;St.src="./images/centipidewalk.png";W.push(St);class A{constructor(e,s,h,a){t(this,"x");t(this,"y");t(this,"width");t(this,"height");this.x=e,this.y=s,this.width=h,this.height=a}draw(){}enemyMovement(){}}class oe extends A{constructor(s,h){super(s,h,X,x);t(this,"speed");t(this,"moment");t(this,"health");t(this,"pointsAwarded");t(this,"frameX");t(this,"frameY");t(this,"eachWidth");t(this,"eachHeight");t(this,"firstFrame");t(this,"lastFrame");t(this,"enemytype");t(this,"state");t(this,"attackAnimationFrames");t(this,"hurtAnimationFrames");t(this,"deathAnimationFrames");t(this,"dustCloudAnimationFrames");t(this,"attackImageSrc");t(this,"hurtImageSrc");t(this,"deathImageSrc");t(this,"dustCloudImageSrc");t(this,"attackImage");t(this,"hurtImage");t(this,"deathImage");t(this,"dustCloudImage");t(this,"endurance");t(this,"isCollidingWithVilan");t(this,"isCollidingWithHero");this.speed=.8,this.moment=this.speed,this.health=120,this.pointsAwarded=this.health,this.frameX=0,this.frameY=0,this.eachWidth=900,this.eachHeight=900,this.firstFrame=1,this.lastFrame=11,this.enemytype=W[0],this.attackAnimationFrames=11,this.hurtAnimationFrames=11,this.deathAnimationFrames=14,this.dustCloudAnimationFrames=4,this.attackImageSrc="./images/zomievillagerattack.png",this.hurtImageSrc="./images/zomievillagerhurt.png",this.deathImageSrc="./images/zomievillagerdeath.png",this.dustCloudImageSrc="./images/mandrake-dust-cloud.png",this.attackImage=new Image,this.attackImage.src=this.attackImageSrc,this.hurtImage=new Image,this.hurtImage.src=this.hurtImageSrc,this.deathImage=new Image,this.deathImage.src=this.deathImageSrc,this.dustCloudImage=new Image,this.dustCloudImage.src=this.dustCloudImageSrc,this.state="idle",this.endurance=20,this.isCollidingWithVilan=!1,this.isCollidingWithHero=!1}enemyMovement(){this.x=this.x-this.speed,r%5===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}draw(){switch(n.fillStyle="gold",n.font="10px Arial",n.fillText(this.health.toString(),this.x+25,this.y+10),this.state){case"idle":r%17===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.enemytype,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"attacking":r%10===0&&(this.frameX<this.attackAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.attackImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"hurt":r%8===0&&(this.frameX<this.hurtAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.hurtImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"dead":r%10===0&&(this.frameX<this.deathAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.deathImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"dustcloud":r%8===0&&(this.frameX<this.dustCloudAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.dustCloudImage,200*this.frameX,0,200,179,this.x,this.y,this.width,this.height);break}}}class de extends A{constructor(s,h){super(s,h,X,x);t(this,"speed");t(this,"moment");t(this,"health");t(this,"pointsAwarded");t(this,"frameX");t(this,"frameY");t(this,"eachWidth");t(this,"eachHeight");t(this,"firstFrame");t(this,"lastFrame");t(this,"enemytype");t(this,"state");t(this,"attackAnimationFrames");t(this,"hurtAnimationFrames");t(this,"deathAnimationFrames");t(this,"dustCloudAnimationFrames");t(this,"attackImageSrc");t(this,"hurtImageSrc");t(this,"deathImageSrc");t(this,"dustCloudImageSrc");t(this,"attackImage");t(this,"hurtImage");t(this,"deathImage");t(this,"dustCloudImage");t(this,"endurance");t(this,"isCollidingWithVilan");t(this,"isCollidingWithHero");t(this,"shootInterval");t(this,"lastShotTime");t(this,"projectileImageSrc");this.speed=.4,this.moment=this.speed,this.health=120,this.pointsAwarded=this.health,this.frameX=0,this.frameY=0,this.eachWidth=72.5,this.eachHeight=72,this.firstFrame=0,this.lastFrame=11,this.enemytype=W[1],this.attackAnimationFrames=3,this.hurtAnimationFrames=1,this.deathAnimationFrames=3,this.dustCloudAnimationFrames=4,this.attackImageSrc="./images/battleturtlefight.png",this.hurtImageSrc="./images/battleturtlehurt.png",this.deathImageSrc="./images/battleturtledead.png",this.dustCloudImageSrc="./images/mandrake-dust-cloud.png",this.attackImage=new Image,this.attackImage.src=this.attackImageSrc,this.hurtImage=new Image,this.hurtImage.src=this.hurtImageSrc,this.deathImage=new Image,this.deathImage.src=this.deathImageSrc,this.dustCloudImage=new Image,this.dustCloudImage.src=this.dustCloudImageSrc,this.state="idle",this.endurance=20,this.isCollidingWithVilan=!1,this.isCollidingWithHero=!1,this.shootInterval=1e3,this.lastShotTime=300,this.projectileImageSrc="./images/ninjaturtlebullet.png"}shoot(){const s=new q(this.x+this.width-30,this.y+20,-3,this.projectileImageSrc,"fireball",128,128,0,0,128,128);S.push(s)}enemyMovement(){const s=Date.now();s-this.lastShotTime>=this.shootInterval&&(console.log("Hello"),console.log(this.shootInterval),this.shoot(),this.lastShotTime=s),this.x=this.x-this.speed,r%5===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}draw(){switch(n.fillStyle="gold",n.font="10px Arial",n.fillText(this.health.toString(),this.x+25,this.y+10),this.state){case"idle":r%100===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.enemytype,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-20,this.width,this.height+10);break;case"attacking":r%5===0&&(this.frameX<this.attackAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.attackImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-20,this.width,this.height+10);break;case"hurt":r%5===0&&(this.frameX<this.hurtAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.hurtImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-20,this.width,this.height+10);break;case"dead":r%15===0&&(this.frameX<this.deathAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.deathImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-20,this.width,this.height+10);break;case"dustcloud":r%8===0&&(this.frameX<this.dustCloudAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.dustCloudImage,200*this.frameX,0,200,179,this.x,this.y,this.width,this.height);break}}}class le extends A{constructor(s,h){super(s,h,X,x);t(this,"speed");t(this,"moment");t(this,"health");t(this,"pointsAwarded");t(this,"frameX");t(this,"frameY");t(this,"eachWidth");t(this,"eachHeight");t(this,"firstFrame");t(this,"lastFrame");t(this,"enemytype");t(this,"state");t(this,"attackAnimationFrames");t(this,"hurtAnimationFrames");t(this,"deathAnimationFrames");t(this,"dustCloudAnimationFrames");t(this,"attackImageSrc");t(this,"hurtImageSrc");t(this,"deathImageSrc");t(this,"dustCloudImageSrc");t(this,"attackImage");t(this,"hurtImage");t(this,"deathImage");t(this,"dustCloudImage");t(this,"endurance");t(this,"isCollidingWithVilan");t(this,"isCollidingWithHero");this.speed=.4,this.moment=this.speed,this.health=120,this.pointsAwarded=this.health,this.frameX=0,this.frameY=0,this.eachWidth=72,this.eachHeight=72,this.firstFrame=0,this.lastFrame=3,this.enemytype=W[3],this.attackAnimationFrames=15,this.hurtAnimationFrames=1,this.deathAnimationFrames=3,this.dustCloudAnimationFrames=4,this.attackImageSrc="./images/centipideattack.png",this.hurtImageSrc="./images/centipidehurt.png",this.deathImageSrc="./images/centipidedeath.png",this.dustCloudImageSrc="./images/mandrake-dust-cloud.png",this.attackImage=new Image,this.attackImage.src=this.attackImageSrc,this.hurtImage=new Image,this.hurtImage.src=this.hurtImageSrc,this.deathImage=new Image,this.deathImage.src=this.deathImageSrc,this.dustCloudImage=new Image,this.dustCloudImage.src=this.dustCloudImageSrc,this.state="idle",this.endurance=20,this.isCollidingWithVilan=!1,this.isCollidingWithHero=!1}enemyMovement(){this.x=this.x-this.speed,r%5===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}draw(){switch(n.fillStyle="gold",n.font="10px Arial",n.fillText(this.health.toString(),this.x+25,this.y+10),this.state){case"idle":r%100===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.enemytype,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-30,this.width+20,this.height+20);break;case"attacking":r%500===0&&(this.frameX<this.attackAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.attackImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-30,this.width+20,this.height+20);break;case"hurt":r%8===0&&(this.frameX<this.hurtAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.hurtImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-30,this.width+20,this.height+20);break;case"dead":r%10===0&&(this.frameX<this.deathAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.deathImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-30,this.width+20,this.height+20);break;case"dustcloud":r%8===0&&(this.frameX<this.dustCloudAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.dustCloudImage,200*this.frameX,0,200,179,this.x,this.y,this.width,this.height);break}}}class ce extends A{constructor(s,h){super(s,h,X,x);t(this,"speed");t(this,"moment");t(this,"health");t(this,"pointsAwarded");t(this,"frameX");t(this,"frameY");t(this,"eachWidth");t(this,"eachHeight");t(this,"firstFrame");t(this,"lastFrame");t(this,"enemytype");t(this,"state");t(this,"attackAnimationFrames");t(this,"hurtAnimationFrames");t(this,"deathAnimationFrames");t(this,"dustCloudAnimationFrames");t(this,"attackImageSrc");t(this,"hurtImageSrc");t(this,"deathImageSrc");t(this,"dustCloudImageSrc");t(this,"attackImage");t(this,"hurtImage");t(this,"deathImage");t(this,"dustCloudImage");t(this,"endurance");t(this,"isCollidingWithVilan");t(this,"isCollidingWithHero");this.speed=.4,this.moment=this.speed,this.health=120,this.pointsAwarded=this.health,this.frameX=0,this.frameY=0,this.eachWidth=900,this.eachHeight=900,this.firstFrame=0,this.lastFrame=11,this.enemytype=W[2],this.attackAnimationFrames=11,this.hurtAnimationFrames=11,this.deathAnimationFrames=14,this.dustCloudAnimationFrames=4,this.attackImageSrc="./images/fallenangelattack.png",this.hurtImageSrc="./images/fallenangelhurt.png",this.deathImageSrc="./images/fallenangeldeath.png",this.dustCloudImageSrc="./images/mandrake-dust-cloud.png",this.attackImage=new Image,this.attackImage.src=this.attackImageSrc,this.hurtImage=new Image,this.hurtImage.src=this.hurtImageSrc,this.deathImage=new Image,this.deathImage.src=this.deathImageSrc,this.dustCloudImage=new Image,this.dustCloudImage.src=this.dustCloudImageSrc,this.state="idle",this.endurance=20,this.isCollidingWithVilan=!1,this.isCollidingWithHero=!1}enemyMovement(){this.x=this.x-this.speed,r%5===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}draw(){switch(n.fillStyle="gold",n.font="10px Arial",n.fillText(this.health.toString(),this.x+25,this.y+10),this.state){case"idle":r%17===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.enemytype,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"attacking":r%10===0&&(this.frameX<this.attackAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.attackImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"hurt":r%8===0&&(this.frameX<this.hurtAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.hurtImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"dead":r%10===0&&(this.frameX<this.deathAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.deathImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"dustcloud":r%8===0&&(this.frameX<this.dustCloudAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),n.drawImage(this.dustCloudImage,200*this.frameX,0,200,179,this.x,this.y,this.width,this.height);break}}}const ge=[ce,oe,de,le];function fe(){for(let i=0;i<u.length;i++)u[i].enemyMovement(),u[i].draw(),u[i].x+u[i].width<0&&(u.splice(i,1),i--);for(let i=S.length-1;i>=0;i--)S[i]&&S[i].update(S[i]),S[i]&&S[i].draw(n)}let p=[];class q{constructor(e,s,h,a,m,g,c,G,V,$,M){t(this,"x");t(this,"y");t(this,"speed");t(this,"width");t(this,"height");t(this,"image");t(this,"type");t(this,"firstframe");t(this,"lastframe");t(this,"eachwidth");t(this,"eachheight");t(this,"firedPosition");this.x=e,this.y=s,this.firedPosition=this.x,this.speed=h,this.width=c,this.height=g,this.image=new Image,this.image.src=a,this.type=m,this.firstframe=G,this.lastframe=V,this.eachwidth=$,this.eachheight=M}draw(e){console.log("Hello"),e.drawImage(this.image,this.eachwidth*this.firstframe,0,this.eachwidth,this.eachheight,this.x,this.y,this.width,this.height),r%10===0&&(this.firstframe<this.lastframe?this.firstframe+=1:this.firstframe=this.firstframe)}update(e){Math.abs(this.x-this.firedPosition)>=64*3.5?(k(p,e),k(S,e)):(console.log(this.speed),this.x+=this.speed)}}class v{constructor(e,s,h,a,m,g,c,G,V,$,M,O,z,Qt,Zt,_t,te,ee,ie,se){t(this,"x");t(this,"y");t(this,"speed");t(this,"health");t(this,"frameX");t(this,"frameY");t(this,"eachWidth");t(this,"eachHeight");t(this,"firstFrame");t(this,"lastFrame");t(this,"image");t(this,"width");t(this,"height");t(this,"state");t(this,"attackAnimationFrames");t(this,"hurtAnimationFrames");t(this,"deathAnimationFrames");t(this,"dustCloudAnimationFrames");t(this,"moment");t(this,"attackImageSrc");t(this,"hurtImageSrc");t(this,"deathImageSrc");t(this,"dustCloudImageSrc");t(this,"attackImage");t(this,"hurtImage");t(this,"deathImage");t(this,"dustCloudImage");t(this,"endurance");t(this,"projectileImageSrc");t(this,"modulo");this.x=s,this.y=h,this.speed=a,this.moment=this.speed,this.health=m,this.frameX=g,this.frameY=0,this.eachWidth=G,this.eachHeight=V,this.firstFrame=g,this.lastFrame=c,this.image=new Image,this.image.src=e,this.width=64,this.height=64,this.health=m,this.state="idle",this.attackAnimationFrames=Qt,this.hurtAnimationFrames=Zt,this.deathAnimationFrames=_t,this.dustCloudAnimationFrames=te,this.attackImageSrc=$,this.hurtImageSrc=M,this.deathImageSrc=O,this.dustCloudImageSrc=z,this.attackImage=new Image,this.attackImage.src=$,this.hurtImage=new Image,this.hurtImage.src=M,this.deathImage=new Image,this.deathImage.src=O,this.dustCloudImage=new Image,this.dustCloudImage.src=z,this.endurance=ee,this.projectileImageSrc=ie,this.modulo=se}draw(e){switch(e.fillStyle="gold",e.font="10px Arial",e.fillText(`${this.health}`,this.x+18,this.y),this.state){case"idle":r%this.modulo===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame),e.drawImage(this.image,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-10,this.width,this.height);break;case"attacking":r%this.modulo===0&&(this.frameX<this.attackAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),e.drawImage(this.attackImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-10,this.width,this.height);break;case"hurt":r%this.modulo===0&&(this.frameX<this.hurtAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),e.drawImage(this.hurtImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-10,this.width,this.height);break;case"dead":r%this.modulo===0&&(this.frameX<this.deathAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),e.drawImage(this.deathImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-10,this.width,this.height);break;case"dustcloud":r%this.modulo===0&&(this.frameX<this.dustCloudAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),e.drawImage(this.dustCloudImage,200*this.frameX,0,200,179,this.x,this.y-10,this.width,this.height);break}}heroMovement(){r%this.modulo===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}}class Ct extends v{constructor(s,h){super("./images/hero1attack.png",s,h,.2,100,0,13,128,128,"./images/hero1attack_2.png","./images/hero1hurt.png","./images/hero1dead.png","./images/mandrake-dust-cloud.png",3,2,2,4,20,"./images/archerarrow.png",10);t(this,"shootInterval");t(this,"lastShotTime");this.shootInterval=2300,this.lastShotTime=0}heroMovement(){const s=Date.now();s-this.lastShotTime>=this.shootInterval&&(this.shoot(),this.lastShotTime=s)}shoot(){const s=new q(this.x+this.width-30,this.y,2,this.projectileImageSrc,"arrow",64,35,0,0,48,48);p.push(s)}}class Wt extends v{constructor(s,h){super("./images/hero2attack.png",s,h,.2,100,0,4,128,128,"./images/hero2attack.png","./images/hero2hurt.png","./images/hero2dead.png","./images/mandrake-dust-cloud.png",6,3,3,4,20,"./images/hero2fireball.png",10);t(this,"shootInterval");t(this,"lastShotTime");this.shootInterval=800,this.lastShotTime=300}heroMovement(){const s=Date.now();s-this.lastShotTime>=this.shootInterval&&(this.shoot(),this.lastShotTime=s)}shoot(){const s=new q(this.x+this.width-30,this.y,2,this.projectileImageSrc,"fireball",60,80,0,32,128,128);p.push(s)}}class At extends v{constructor(e,s){super("./images/hero3run.png",e,s,.8,100,0,7,128,128,"./images/hero3attack.png","./images/hero3hurt.png","./images/hero3dead.png","./images/mandrake-dust-cloud.png",3,2,2,4,20,"projectileImageSrc",8)}heroMovement(){this.x=this.x+this.speed,r%8===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}}class vt extends v{constructor(e,s){super("./images/hero4run.png",e,s,.8,100,0,5,96.4,98,"./images/hero4attack.png","./images/hero4hurt.png","./images/hero4dead.png","./images/mandrake-dust-cloud.png",3,2,3,4,5,"projectileImageSrc",15)}heroMovement(){this.x=this.x+this.speed,r%5===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}}class Ht extends v{constructor(e,s){super("./images/hero5run.png",e,s,.8,100,0,5,96.4,98,"./images/hero5attack.png","./images/hero5hurt.png","./images/hero5dead.png","./images/mandrake-dust-cloud.png",2,0,3,4,10,"projectileImageSrc",5)}heroMovement(){this.x=this.x+this.speed,r%5===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}}class Tt extends v{constructor(e,s){super("./images/hero6run.png",e,s,.8,100,0,7,128,128,"./images/hero6attack.png","./images/hero6hurt.png","./images/hero6dead.png","./images/mandrake-dust-cloud.png",3,2,2,4,5,"projectileImageSrc",5)}heroMovement(){this.x=this.x+this.speed,r%8===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}}class bt extends v{constructor(s,h){super("./images/hero7attack.png",s,h,.8,100,0,3,130,130,"./images/hero7attack.png","./images/hero7dead.png","./images/hero1dead.png","./images/mandrake-dust-cloud.png",3,1,5,4,10,"./images/jinifireball.png",13);t(this,"shootInterval");t(this,"lastShotTime");this.shootInterval=700,this.lastShotTime=500}heroMovement(){const s=Date.now();s-this.lastShotTime>=this.shootInterval&&(this.shoot(),this.lastShotTime=s)}shoot(){const s=new q(this.x+this.width-30,this.y,2,this.projectileImageSrc,"fireball",60,60,0,9,642,642);p.push(s)}}class Et extends v{constructor(s,h){super("./images/hero8attack.png",s,h,.8,100,0,6,128,128,"./images/hero8attack.png","./images/hero8hurt.png","./images/hero8dead.png","./images/mandrake-dust-cloud.png",6,3,8,4,20,"./images/hero8fireball.png",15);t(this,"shootInterval");t(this,"lastShotTime");this.shootInterval=1700,this.lastShotTime=700}heroMovement(){const s=Date.now();s-this.lastShotTime>=this.shootInterval&&(this.shoot(),this.lastShotTime=s)}shoot(){const s=new q(this.x+this.width-30,this.y,2,this.projectileImageSrc,"fireball",60,60,0,12,128,128);p.push(s)}}const E=document.getElementById("canvas1"),I=E.getContext("2d"),Y=new Audio;Y.src="./sound/resouce-increase.mp3";const ot=[],b=[];let o=null;function H(i,e,s,h,a,m,g,c,G,V,$,M){const O=new Image;O.src=i;const z={x:e,y:s,width:64,height:64,imageSrc:i,frameX:0,frameY:0,eachWidth:m,eachHeight:g,firstFrame:h,lastFrame:a,image:O,heroClass:c,cost:G,name:V,imageX:$,imageY:M};return ot.push(z),z}H("./images/card1.png",64*4,0,0,21,128,128,Ct,100,"Archer",64*4,0);H("./images/card2.png",64*5,0,0,11,128,128,Wt,100,"Wizard",64*5,0);H("./images/card3.png",64*6,0,0,19,128,128,At,100,"Swordsman",64*6,0);function ue(){I.clearRect(0,0,E.width,E.height),ot.forEach(i=>{I.strokeStyle="black",I.strokeRect(i.x,i.y,i.width,i.height),I.fillStyle="purple",I.fillRect(i.x,i.y,i.width,i.height),r%7===0&&(i.frameX<i.lastFrame?i.frameX+=1:i.frameX=i.firstFrame),I.fillStyle="gold",I.font="10px Arial",I.fillText(`${i.name}`,i.x+11,i.y+10),I.fillText(`Cost:${i.cost}`,i.x+11,i.y+20),I.drawImage(i.image,i.eachWidth*i.frameX,0,i.eachWidth,i.eachHeight,i.imageX,i.imageY,i.width,i.height)})}const dt=new Set;function ct(i,e){const s=`${i},${e}`;return dt.has(s)}E.addEventListener("click",i=>{const e=E.getBoundingClientRect();let s=i.clientX-e.left,h=i.clientY-e.top;if(s=s-s%64,h=h-h%64,!o||o&&h==0)ot.forEach(a=>{s>=a.x&&s<=a.x+a.width&&h>=a.y&&h<=a.y+a.height&&(o=a)});else{if(h>=64&&h<=564&&s>=128)if(o.heroClass===At||o.heroClass===vt||o.heroClass===Ht||o.heroClass===Tt||o.heroClass==bt||o.heroClass==Et){const a=new o.heroClass(s,h);b.push(a)}else if(!ct(s,h)&&o.heroClass==Ct||!ct(s,h)&&o.heroClass==Wt){const a=new o.heroClass(s,h);b.push(a);const m=`${s},${h}`;dt.add(m)}else console.log("Cannot drop hero on an occupied grid position.");else console.log("Cannot place hero in the first or last row.");o=null}});function Ie(){for(var i=0;i<=b.length-1;i++)b[i].heroMovement(),b[i].draw(I);$t();for(let e=p.length-1;e>=0;e--)p[e]&&p[e].update(p[e]),p[e]&&p[e].draw(I)}setTimeout(()=>{Y.play(),H("./images/card4.png",64*7,0,0,9,96.4,98,vt,150,"Kings Guard",64*7,0)},0);setTimeout(()=>{Y.play(),H("./images/card5.png",64*8,0,0,11,96.4,98,Ht,150,"Viking Hero",64*8,0)},0);setTimeout(()=>{Y.play(),H("./images/card6.png",64*9,0,0,11,128.2,130,Tt,200,"Fighter",64*9,0)},0);setTimeout(()=>{Y.play(),H("./images/card7.png",64*10,0,0,6,130,130,bt,200,"Jinn",64*10,10)},0);setTimeout(()=>{Y.play(),H("./images/card8.png",64*11,0,0,14,130,130,Et,200,"Wizard Girl",64*11,10)},0);let Yt=300;function pe(i){Yt+=i,Y.play()}let F=null,y=null;E.addEventListener("mousemove",i=>{const e=E.getBoundingClientRect();F=i.clientX-e.left,y=i.clientY-e.top,$t()});function $t(){F&&(F=F-F%64),y&&(y=y-y%64),o&&F!==null&&y!==null&&y>=64&&y<576&&F>=128&&(r%8===0&&(o.frameX<o.lastFrame?o.frameX+=1:o.frameX=o.firstFrame),I.strokeStyle="gold",I.strokeRect(F,y,64,64),I.drawImage(o.image,o.eachWidth*o.frameX,0,o.eachWidth,o.eachHeight,F,y-10,o.width,o.height))}const Mt=document.getElementById("canvas1"),we=Mt.getContext("2d");var Bt=new Image;Bt.src="./images/projectilefortower.png";class ye{constructor(e,s,h,a,m=0){t(this,"x");t(this,"y");t(this,"targetX");t(this,"targetY");t(this,"startX");t(this,"startY");t(this,"peakHeight");t(this,"speed");t(this,"progress");t(this,"width");t(this,"height");this.x=e,this.y=s,this.startX=e,this.startY=s,this.targetX=h,this.targetY=a,this.peakHeight=m,this.speed=(h>384,.8),this.progress=0,this.width=25,this.height=25}update(){this.progress+=this.speed;const e=Math.hypot(this.targetX-this.startX,this.targetY-this.startY),s=this.progress/e;this.x=this.startX+(this.targetX-this.startX)*s,this.y=this.startY+(this.targetY-this.startY)*s,s>=1&&(this.progress=e+Mt.width)}draw(){we.drawImage(Bt,this.x,this.y,this.width,this.height)}}const Xe=document.getElementById("canvas1"),B=Xe.getContext("2d");let Q=[],gt=null;const xe="#00FF00",Fe="#FF0000",w=class w{constructor(e,s,h,a,m,g,c){t(this,"height");t(this,"width");t(this,"x");t(this,"y");t(this,"firstFrame");t(this,"lastFrame");t(this,"frameX");t(this,"tower");t(this,"eachWidth");t(this,"eachHeight");t(this,"lastShootTime");t(this,"shootInterval");t(this,"defaultShootInterval");t(this,"collisionShootInterval");t(this,"isColliding");t(this,"health");t(this,"maxHealth");t(this,"dustCloudSprite");t(this,"dustCloudFrames");t(this,"dustCloudFrameIndex");t(this,"dustCloudFrameWidth");this.height=e,this.width=s,this.x=h,this.y=a,this.firstFrame=m,this.lastFrame=g,this.frameX=c,this.tower=new Image,this.tower.src="./images/tower.png",this.eachWidth=128,this.eachHeight=144,this.lastShootTime=0,this.defaultShootInterval=5e3,this.collisionShootInterval=100,this.shootInterval=this.defaultShootInterval,this.isColliding=!1,this.maxHealth=400,this.health=this.maxHealth,this.dustCloudSprite=new Image,this.dustCloudSprite.src="./images/mandrake-dust-cloud.png",this.dustCloudFrames=4,this.dustCloudFrameIndex=0,this.dustCloudFrameWidth=200}draw(){r%6===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame),B.drawImage(this.tower,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height),this.drawHealthBar(),this.launchProjectile(),Q.forEach(e=>{e.update(),e.draw()})}launchProjectile(){const e=Date.now();let s=this.findNearestEnemy();if(s&&e-this.lastShootTime>this.shootInterval&&L.indexOf(this)===w.shooterIndex){const a=new ye(this.x+60,this.y,s.x,s.y,100);Q.push(a),this.lastShootTime=e}console.log(`Tower at (${this.x}, ${this.y}) shoot interval: ${this.shootInterval}`)}static updateShooter(){const e=Date.now();e-w.lastShooterChangeTime>w.shooterChangeInterval&&(w.shooterIndex=(w.shooterIndex+1)%L.length,w.lastShooterChangeTime=e,console.log(`Shooter changed to tower index: ${w.shooterIndex}`))}findNearestEnemy(){let e=1/0;const s=Math.random()<.5?this.y:this.y+64;return u.forEach(h=>{if(h.y>=s&&h.y<=s+64){const a=Math.hypot(h.x-this.x,h.y-this.y);a<e&&a<=64*3&&(e=a,gt=h)}}),gt}drawHealthBar(){const e=this.width,s=8,h=this.x,a=this.y-s+4;B.fillStyle=Fe,B.fillRect(h,a,e,s);const m=this.health/this.maxHealth;B.fillStyle=xe,B.fillRect(h,a,e*m,s),this.health<=0&&(r%20===0&&(this.frameX<4?this.frameX+=1:this.frameX=this.firstFrame),B.drawImage(this.dustCloudSprite,200*this.frameX,0,200,179,this.x,this.y,this.width+20,this.height),setTimeout(()=>{k(L,this)},1e3))}checkCollisionWithEnemies(){this.isColliding=!1;for(let e of u)if(this.x<e.x+e.width&&this.x+this.width>e.x&&this.y<e.y+e.height&&this.y+this.height>e.y){e.speed=0,e.x=e.x+2,e.state="attacking",this.isColliding=!0,this.health-=10,this.shootInterval=this.collisionShootInterval;break}this.isColliding||(this.shootInterval=this.defaultShootInterval),console.log(`Tower at (${this.x}, ${this.y}) is colliding: ${this.isColliding}, health: ${this.health}`)}};t(w,"shooterIndex",0),t(w,"shooterChangeInterval",3e3),t(w,"lastShooterChangeTime",Date.now());let T=w;const L=[new T(128,128,0,64,0,11,0),new T(128,128,0,192,0,11,0),new T(128,128,0,320,0,11,0),new T(128,128,0,448,0,11,0)];function ke(){T.updateShooter(),L.forEach(i=>{i.checkCollisionWithEnemies(),i.draw()})}const Se=document.getElementById("canvas1"),it=Se.getContext("2d");function Ce(){it.fillStyle="gold",it.font="20px Arial",it.fillText("Coins: "+Yt,0,50)}function We(){for(let i of b)for(let e of u)i.x<e.x+e.width&&i.x+i.width>e.x&&i.y<e.y+e.height&&i.y+i.height>e.y&&(e.isCollidingWithHero=!0,e.isCollidingWithVillain=!1,(i.speed>0&&i.x<e.x||i.speed<0&&i.x>e.x)&&(i.speed=0,e.speed=0,i.state="attacking",e.state="attacking",Ae(i,e)))}function Ae(i,e){let s=!0;const h=setInterval(()=>{i.health<=0||e.health<=0?(clearInterval(h),i.health<=0?(i.state="dead",setTimeout(()=>{i.state="dustcloud"},400),setTimeout(()=>{e.speed=e.moment,k(b,i);const m=`${i.x},${i.y}`;dt.delete(m)},1500)):i.state="idle",e.health<=0?(e.state="dead",setTimeout(()=>{e.state="dustcloud",i.state="idle"},400),setTimeout(()=>{i.speed=i.moment,k(u,e)},800)):e.state="idle"):(s?(i.state="attacking",e.state="hurt"):(i.state="hurt",e.state="attacking"),s=!s)},700),a=setInterval(()=>{i.health<=0||e.health<=0?clearInterval(a):(i.health-=i.endurance,e.health-=e.endurance)},500)}function k(i,e){const s=i.indexOf(e);s>-1&&i.splice(s,1)}function ve(){for(let i of u)for(let e of p)e.x<i.x+i.width&&e.x+e.width>i.x&&e.y<i.y+i.height&&e.y+e.height>i.y&&(k(p,e),i.health-=i.endurance,i.health<=0?(i.state="dead",i.speed=0,setTimeout(()=>{i.state="dustcloud",setTimeout(()=>{k(u,i)},500)},500)):(i.state="hurt",i.speed=0,setTimeout(()=>{i.state="idle",i.speed=i.moment},500)))}function He(){for(let i of L)for(let e of u)i.x<e.x+e.width&&i.x+i.width>e.x&&i.y<e.y+e.height&&i.y+i.height>e.y&&(e.speed=0,e.x=e.x,e.state="attacking")}function Te(){for(let i of Q)for(let e of u)i.x<e.x+e.width&&i.x+i.width>e.x&&i.y<e.y+e.height&&i.y+i.height>e.y&&(k(Q,i),e.health-=e.endurance,e.health<=0?(e.state="dead",e.speed=0,setTimeout(()=>{e.state="dustcloud",setTimeout(()=>{k(u,e)},500)},500)):(e.state="hurt",e.speed=0,setTimeout(()=>{e.state="idle",e.speed=e.moment},500)))}const N=document.getElementById("canvas1"),jt=N.getContext("2d"),Rt=new Image;Rt.src="./images/mandrake.png";const be=new Image;be.src="./images/mandrake-dust-cloud.png";const Z=64,j=64,Ee=110;let ft=[50,60,70,80],R=[];class Ye{constructor(e,s,h){t(this,"x");t(this,"y");t(this,"size");t(this,"gamePoint");t(this,"creationTime");t(this,"frameX");t(this,"frameY");t(this,"spriteWidth");t(this,"spriteHeight");t(this,"minFrame");t(this,"maxFrame");this.x=e,this.y=s,this.size=h,this.gamePoint=ft[Math.floor(Math.random()*ft.length)],this.creationTime=Date.now(),this.frameX=0,this.frameY=0,this.spriteWidth=256,this.spriteHeight=256,this.minFrame=0,this.maxFrame=355}draw(e){r%1===0&&(this.frameX++,this.frameX>=18&&(this.frameX=0,this.frameY++,this.frameY>=18&&(this.frameY=0))),jt.drawImage(Rt,this.frameX*this.spriteWidth,this.frameY*this.spriteHeight,this.spriteWidth,this.spriteHeight,this.x+(Z-this.size)/2,this.y+(j-this.size)/2,j*2,j*2),e.fillStyle="gold",e.font="10px Arial",e.fillText(this.gamePoint.toString(),this.x+25,this.y)}isExpired(){return Date.now()-this.creationTime>5500}isHovered(e,s,h){const a=e>=this.x&&e<=this.x+Z*1.3&&s>=this.y&&s<=this.y+j*1.3;return a&&pe(h.gamePoint),a}}function $e(){const i=N.width/Z,e=N.height/j,s=Math.floor(Math.random()*(i-2))+2,h=Math.floor(Math.random()*(e-1))+1,a=s*Z,m=h*j;return{x:a,y:m}}function Me(){const{x:i,y:e}=$e(),s=new Ye(i,e,Ee);R.push(s)}function Be(){R=R.filter(i=>!i.isExpired());for(let i of R)i.draw(jt)}N.addEventListener("mousemove",i=>{const e=N.getBoundingClientRect(),s=i.clientX-e.left,h=i.clientY-e.top;R=R.filter(a=>!a.isHovered(s,h,a))});let at=0;const rt=document.getElementById("canvas1"),je=rt.getContext("2d");function Re(i,e){if(i.fillStyle="gold",i.font="50px MedievalSharp",at>=3){je.fillText("Game Over",rt.width/2-300,rt.height/2);return}i.fillText(` Seige Wave ${at+1} incoming get ready `,e.width/2-300,e.height/2)}function De(){at++}const P=[],Dt=new Image;Dt.src="./images/golemrun.png";P.push(Dt);const Pt=new Image;Pt.src="./images/fireballrun.png";P.push(Pt);const Gt=new Image;Gt.src="./images/monsterdogwalk.png";P.push(Gt);const Pe=document.getElementById("canvas1"),d=Pe.getContext("2d");class Ge extends A{constructor(s,h){super(s,h,X,x);t(this,"speed");t(this,"moment");t(this,"health");t(this,"pointsAwarded");t(this,"frameX");t(this,"frameY");t(this,"eachWidth");t(this,"eachHeight");t(this,"firstFrame");t(this,"lastFrame");t(this,"enemytype");t(this,"state");t(this,"attackAnimationFrames");t(this,"hurtAnimationFrames");t(this,"deathAnimationFrames");t(this,"dustCloudAnimationFrames");t(this,"attackImageSrc");t(this,"hurtImageSrc");t(this,"deathImageSrc");t(this,"dustCloudImageSrc");t(this,"attackImage");t(this,"hurtImage");t(this,"deathImage");t(this,"dustCloudImage");t(this,"endurance");t(this,"isCollidingWithVilan");t(this,"isCollidingWithHero");this.speed=.4,this.moment=this.speed,this.health=120,this.pointsAwarded=this.health,this.frameX=0,this.frameY=0,this.eachWidth=900,this.eachHeight=900,this.firstFrame=0,this.lastFrame=11,this.enemytype=P[0],this.attackAnimationFrames=3,this.hurtAnimationFrames=1,this.deathAnimationFrames=4,this.dustCloudAnimationFrames=4,this.attackImageSrc="./images/golemattack.png",this.hurtImageSrc="./images/golemhurt.png",this.deathImageSrc="./images/golemdead.png",this.dustCloudImageSrc="./images/mandrake-dust-cloud.png",this.attackImage=new Image,this.attackImage.src=this.attackImageSrc,this.hurtImage=new Image,this.hurtImage.src=this.hurtImageSrc,this.deathImage=new Image,this.deathImage.src=this.deathImageSrc,this.dustCloudImage=new Image,this.dustCloudImage.src=this.dustCloudImageSrc,this.state="idle",this.endurance=20,this.isCollidingWithVilan=!1,this.isCollidingWithHero=!1}enemyMovement(){this.x=this.x-this.speed,r%5===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}draw(){switch(d.fillStyle="gold",d.font="10px Arial",d.fillText(this.health.toString(),this.x+25,this.y+10),this.state){case"idle":r%17===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame),d.drawImage(this.enemytype,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"attacking":r%10===0&&(this.frameX<this.attackAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),d.drawImage(this.attackImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"hurt":r%8===0&&(this.frameX<this.hurtAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),d.drawImage(this.hurtImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"dead":r%10===0&&(this.frameX<this.deathAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),d.drawImage(this.deathImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"dustcloud":r%8===0&&(this.frameX<this.dustCloudAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),d.drawImage(this.dustCloudImage,200*this.frameX,0,200,179,this.x,this.y,this.width,this.height);break}}}class Ve extends A{constructor(s,h){super(s,h,X,x);t(this,"speed");t(this,"moment");t(this,"health");t(this,"pointsAwarded");t(this,"frameX");t(this,"frameY");t(this,"eachWidth");t(this,"eachHeight");t(this,"firstFrame");t(this,"lastFrame");t(this,"enemytype");t(this,"state");t(this,"attackAnimationFrames");t(this,"hurtAnimationFrames");t(this,"deathAnimationFrames");t(this,"dustCloudAnimationFrames");t(this,"attackImageSrc");t(this,"hurtImageSrc");t(this,"deathImageSrc");t(this,"dustCloudImageSrc");t(this,"attackImage");t(this,"hurtImage");t(this,"deathImage");t(this,"dustCloudImage");t(this,"endurance");t(this,"isCollidingWithVilan");t(this,"isCollidingWithHero");this.speed=.4,this.moment=this.speed,this.health=120,this.pointsAwarded=this.health,this.frameX=0,this.frameY=0,this.eachWidth=128,this.eachHeight=128,this.firstFrame=0,this.lastFrame=20,this.enemytype=P[1],this.attackAnimationFrames=23,this.hurtAnimationFrames=2,this.deathAnimationFrames=4,this.dustCloudAnimationFrames=4,this.attackImageSrc="./images/fireballattack.png",this.hurtImageSrc="./images/fireballhurt.png",this.deathImageSrc="./images/fireballdead.png",this.dustCloudImageSrc="./images/mandrake-dust-cloud.png",this.attackImage=new Image,this.attackImage.src=this.attackImageSrc,this.hurtImage=new Image,this.hurtImage.src=this.hurtImageSrc,this.deathImage=new Image,this.deathImage.src=this.deathImageSrc,this.dustCloudImage=new Image,this.dustCloudImage.src=this.dustCloudImageSrc,this.state="idle",this.endurance=20,this.isCollidingWithVilan=!1,this.isCollidingWithHero=!1}enemyMovement(){this.x=this.x-this.speed,r%5===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}draw(){switch(d.fillStyle="gold",d.font="10px Arial",d.fillText(this.health.toString(),this.x+35,this.y+10),this.state){case"idle":r%17===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame),d.drawImage(this.enemytype,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-10,this.width+30,this.height+30);break;case"attacking":r%10===0&&(this.frameX<this.attackAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),d.drawImage(this.attackImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"hurt":r%8===0&&(this.frameX<this.hurtAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),d.drawImage(this.hurtImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"dead":r%10===0&&(this.frameX<this.deathAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),d.drawImage(this.deathImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height);break;case"dustcloud":r%8===0&&(this.frameX<this.dustCloudAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),d.drawImage(this.dustCloudImage,200*this.frameX,0,200,179,this.x,this.y,this.width,this.height);break}}}class Oe extends A{constructor(s,h){super(s,h,X,x);t(this,"speed");t(this,"moment");t(this,"health");t(this,"pointsAwarded");t(this,"frameX");t(this,"frameY");t(this,"eachWidth");t(this,"eachHeight");t(this,"firstFrame");t(this,"lastFrame");t(this,"enemytype");t(this,"state");t(this,"attackAnimationFrames");t(this,"hurtAnimationFrames");t(this,"deathAnimationFrames");t(this,"dustCloudAnimationFrames");t(this,"attackImageSrc");t(this,"hurtImageSrc");t(this,"deathImageSrc");t(this,"dustCloudImageSrc");t(this,"attackImage");t(this,"hurtImage");t(this,"deathImage");t(this,"dustCloudImage");t(this,"endurance");t(this,"isCollidingWithVilan");t(this,"isCollidingWithHero");this.speed=.4,this.moment=this.speed,this.health=120,this.pointsAwarded=this.health,this.frameX=0,this.frameY=0,this.eachWidth=96,this.eachHeight=96,this.firstFrame=0,this.lastFrame=5,this.enemytype=P[2],this.attackAnimationFrames=11,this.hurtAnimationFrames=3,this.deathAnimationFrames=5,this.dustCloudAnimationFrames=4,this.attackImageSrc="./images/monsterdogattack.png",this.hurtImageSrc="./images/monterdoghurt.png",this.deathImageSrc="./images/monsterdogdeath.png",this.dustCloudImageSrc="./images/mandrake-dust-cloud.png",this.attackImage=new Image,this.attackImage.src=this.attackImageSrc,this.hurtImage=new Image,this.hurtImage.src=this.hurtImageSrc,this.deathImage=new Image,this.deathImage.src=this.deathImageSrc,this.dustCloudImage=new Image,this.dustCloudImage.src=this.dustCloudImageSrc,this.state="idle",this.endurance=20,this.isCollidingWithVilan=!1,this.isCollidingWithHero=!1}enemyMovement(){this.x=this.x-this.speed,r%5===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}draw(){switch(d.fillStyle="gold",d.font="10px Arial",d.fillText(this.health.toString(),this.x+35,this.y+10),this.state){case"idle":r%17===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame),d.drawImage(this.enemytype,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-30,this.width+10,this.height+20);break;case"attacking":r%10===0&&(this.frameX<this.attackAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),d.drawImage(this.attackImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-30,this.width+10,this.height+20);break;case"hurt":r%8===0&&(this.frameX<this.hurtAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),d.drawImage(this.hurtImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-30,this.width+10,this.height+20);break;case"dead":r%10===0&&(this.frameX<this.deathAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),d.drawImage(this.deathImage,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y-30,this.width+10,this.height+20);break;case"dustcloud":r%8===0&&(this.frameX<this.dustCloudAnimationFrames?this.frameX+=1:this.frameX=this.firstFrame),d.drawImage(this.dustCloudImage,200*this.frameX,0,200,179,this.x,this.y,this.width,this.height);break}}}const ze=[Ge,Ve,Oe],Vt=[],Ot=new Image;Ot.src="./images/enemy2.png";Vt.push(Ot);const Le=document.getElementById("canvas1"),J=Le.getContext("2d");class Ne extends A{constructor(s,h){super(s,h,X,x);t(this,"speed");t(this,"moment");t(this,"health");t(this,"pointsAwarded");t(this,"frameX");t(this,"frameY");t(this,"eachWidth");t(this,"eachHeight");t(this,"firstFrame");t(this,"lastFrame");t(this,"enemytype");t(this,"attackInterval");this.speed=.7,this.moment=this.speed,this.health=120,this.pointsAwarded=this.health,this.frameX=0,this.frameY=0,this.eachWidth=900,this.eachHeight=900,this.firstFrame=0,this.lastFrame=11,this.enemytype=Vt[0],this.attackInterval=20}enemyMovement(){this.x=this.x-this.speed,r%10===0&&(this.frameX<this.lastFrame?this.frameX+=1:this.frameX=this.firstFrame)}draw(){J.fillStyle="gold",J.font="10px Arial",J.fillText(this.health.toString(),this.x+25,this.y+10),J.drawImage(this.enemytype,this.eachWidth*this.frameX,0,this.eachWidth,this.eachHeight,this.x,this.y,this.width,this.height)}}const Ke=[Ne],f=document.getElementById("canvas1"),l=f.getContext("2d");f.height=576;f.width=1344;let r=0;const X=64,x=64,zt=new Image;zt.src="./images/hovertile.png";let ut=1,K=[];const D=64*4,It=20,st=f.width-D-20,ht=20;let mt=D;const pt=2,qe="#333";let Lt="";K.push(...ge);class Je{constructor(e,s){t(this,"x");t(this,"y");t(this,"width");t(this,"height");t(this,"isHovered");this.x=e,this.y=s,this.width=X,this.height=x,this.isHovered=!1}draw(){this.isHovered&&l.drawImage(zt,this.x,this.y,this.width,this.height)}}const C=[];function Ue(){C.length=0;for(let i=64;i<f.height;i+=x)for(let e=128;e<f.width;e+=X)C.push(new Je(e,i))}function Nt(){for(let i=0;i<C.length;i++)C[i].draw()}const _=f.width/2-100,tt=f.height/2-25,Kt=200,qt=50;let et=!1,nt=0,wt=100,yt=1.5;function Jt(){l.fillStyle="#4CAF50",l.fillRect(_,tt+200,Kt,qt),l.fillStyle="white",l.font="30px Arial",l.fillText("Start Game",_+20,tt+235)}function Ut(){l.fillStyle="#333",l.fillRect(0,0,f.width,f.height),l.fillStyle="#FFD700",l.font="60px Georgia",l.fillText("Siege Guardians",f.width/2-150,100),l.font="24px Arial",l.fillStyle="white";const i=["Instructions:","1. Select a hero, hover over the game board and click on the gameboard drop it.","2. Enemies come in waves.","3. After each wave, each hero's damage-taking capability increases.","4. Mandrake appears at intervals across the game board. Hover over it to collect coins.","5. If all the 4 towers are destroyed, the game is over.","6. All the hero's have different abilities and different damgae taking capabilities.","7. You will be awarded with a new hero every 20 seconds.","8. Watch out for the towers health because if all 4 are destroyed its GAME OVER."];for(let e=0;e<i.length;e++)l.fillText(i[e],f.width/2-300,150+e*30)}f.addEventListener("click",function(i){const e=f.getBoundingClientRect(),s=i.clientX-e.left,h=i.clientY-e.top;s>=_&&s<_+Kt&&h>=tt+200&&h<tt+200+qt&&(et||(et=!0,Qe(),nt=Date.now(),lt()))});f.addEventListener("mousemove",function(i){if(!et)return;const e=f.getBoundingClientRect(),s=i.clientX-e.left,h=i.clientY-e.top;let a=null,m=null;for(let g=0;g<C.length;g++){const c=C[g];if(s>=c.x&&s<c.x+c.width&&h>=c.y&&h<c.y+c.height){a=c.y,m=c.x;break}}for(let g=0;g<C.length;g++){const c=C[g];c.x===m||c.y===a?c.isHovered=!0:c.isHovered=!1}Nt()});function Qe(){r=0,Ue()}function lt(){if(l.clearRect(0,0,f.width,f.height),!et){Ut(),Jt();return}ue(),Nt(),Ce(),Ie(),fe(),ei(),r++;let i=(Date.now()-nt)/1e3;if(mt=D-i/wt*D,Lt="Next wave in",i<yt&&Re(l,f),Be(),We(),ve(),He(),Te(),i>=wt+yt)switch(mt=D,De(),nt=Date.now(),ut++,ut){case 2:K.push(...ze);break;case 3:K.push(...Ke);break}ke(),Ze(),requestAnimationFrame(lt)}function Ze(){l.fillStyle=qe,l.fillRect(st,ht,D,It),l.fillStyle="#00CED1",l.fillRect(st+2,ht+pt,mt-2,It-2*pt),l.fillStyle="white",l.font="30px Georgia",l.fillText(Lt,st-180,ht+20)}const _e=[64,128,192,256,320,384,448,512,576],ti=8;let U=5e3,Xt=-U;function ei(){const i=Date.now();if(i-Xt>U){Xt=i;const e=Math.floor(Math.random()*ti),s=_e[e],h=Math.floor(Math.random()*K.length),a=new K[h](f.width,s);u.push(a),U>1500&&(U-=150)}}Ut();Jt();setInterval(Me,5e3);var ii=new Audio;ii.src="./sound/maintheme.mp3";me();lt();
